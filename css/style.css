/* ============================================
   Fairy Classroom v2 â€” Homevita-inspired Design
   ============================================ */

/* --- Reset & Base --- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --pink: #FF9FD6;
  --pink-dark: #FF5FB4;
  --purple: #C9A1FF;
  --purple-dark: #A66CFF;
  --sky: #8BD7FF;
  --mint: #9FF3D2;
  --gold: #FFE386;
  --orange: #FFB06B;
  --white: #FFFCFF;
  --bg: #FFF7FF;
  --text: #5D3B73;
  --text-light: #8B6CA5;
  --shadow: rgba(166, 108, 255, 0.16);
  --radius: 20px;
  --radius-sm: 12px;
  --primary: var(--pink-dark);
  --primary-light: var(--pink);
  --font: 'Pretendard', 'Noto Sans KR', 'Apple SD Gothic Neo', 'Malgun Gothic', system-ui, -apple-system, sans-serif;
  --header-height: 56px;
  --tab-height: 64px;
  --touch-target: 44px;
}

html {
  font-size: 16px;
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: var(--font);
  background:
    radial-gradient(1200px 420px at -10% -15%, rgba(255,159,214,0.45), transparent 58%),
    radial-gradient(980px 380px at 110% -10%, rgba(139,215,255,0.5), transparent 55%),
    radial-gradient(760px 320px at 50% 110%, rgba(159,243,210,0.45), transparent 60%),
    linear-gradient(180deg, #fff9ff 0%, #fff7fd 45%, #fef8ff 100%);
  color: var(--text);
  min-height: 100dvh;
  overflow-x: hidden;
  user-select: none;
  -webkit-user-select: none;
}

button,
input,
select,
textarea {
  font-family: var(--font);
}

.btn-primary,
.btn-secondary,
.tab-btn,
.quick-play-card,
.stage-card,
.game-mode-card,
.stage-game-btn,
.tool-btn,
.coloring-mini-btn,
.counting-choice,
.btn-back {
  touch-action: manipulation;
}

/* --- Themes --- */
.theme-pink {
  --primary: #FF5FB4;
  --primary-light: #FF9FD6;
  --bg: #FFF5FB;
}
.theme-purple {
  --primary: #9D63FF;
  --primary-light: #C9A1FF;
  --bg: #F9F2FF;
}
.theme-blue {
  --primary: #3CB8FF;
  --primary-light: #8BD7FF;
  --bg: #EFF9FF;
}
.theme-green {
  --primary: #53D89C;
  --primary-light: #9FF3D2;
  --bg: #F1FFF9;
}

/* --- Screen Management --- */
.screen {
  display: none;
  position: fixed;
  top: var(--header-height);
  left: 0; right: 0;
  bottom: var(--tab-height);
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

.screen.active {
  display: flex;
  flex-direction: column;
  animation: fadeIn 0.25s ease;
}

#screen-splash, #screen-profile {
  top: 0;
  bottom: 0;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ==========================================
   FIXED HEADER
   ========================================== */
.app-header {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: var(--header-height);
  background: linear-gradient(90deg, rgba(255,255,255,0.96), rgba(255,250,255,0.96));
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 12px;
  box-shadow: 0 6px 18px var(--shadow);
  border-bottom: 1px solid rgba(255, 95, 180, 0.15);
  z-index: 100;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 6px;
  background: none;
  border: none;
  padding: 6px 10px;
  border-radius: 50px;
  cursor: pointer;
  font-family: inherit;
  color: var(--text);
  transition: background 0.2s;
}
.header-left:active { background: var(--primary-light); }

.header-avatar-icon { font-size: 1.5rem; }
.header-name { font-size: 0.9rem; font-weight: 700; }

.header-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}
.header-date { font-size: 0.75rem; color: var(--text-light); }
.header-level { font-size: 0.8rem; font-weight: 700; color: var(--primary); }

.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}
.header-time {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(166,108,255,0.2);
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 0.72rem;
  font-weight: 700;
  color: var(--text);
}
.header-stars {
  background: linear-gradient(135deg, #FFF7D1, #FFDFA8);
  padding: 4px 10px;
  border-radius: 50px;
  font-size: 0.85rem;
  font-weight: 700;
}
.header-streak {
  font-size: 0.85rem;
  font-weight: 700;
  color: #FF6D4A;
}

/* ==========================================
   FIXED BOTTOM TAB BAR
   ========================================== */
.tab-bar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  height: var(--tab-height);
  background: linear-gradient(90deg, rgba(255,255,255,0.97), rgba(247,242,255,0.97));
  display: flex;
  align-items: center;
  justify-content: space-around;
  box-shadow: 0 -8px 18px var(--shadow);
  border-top: 1px solid rgba(166,108,255,0.16);
  z-index: 100;
  padding-bottom: env(safe-area-inset-bottom, 0);
}

.tab-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  background: none;
  border: none;
  padding: 6px 8px;
  cursor: pointer;
  font-family: inherit;
  color: var(--text-light);
  transition: all 0.2s;
  min-width: 48px;
  min-height: var(--touch-target);
}

.tab-btn.active {
  color: var(--primary);
}

.tab-btn.active .tab-icon {
  animation: tabBounce 0.4s ease;
}

.tab-icon { font-size: 1.4rem; line-height: 1; }
.tab-label { font-size: 0.65rem; font-weight: 600; }

@keyframes tabBounce {
  0%, 100% { transform: translateY(0); }
  40% { transform: translateY(-6px); }
  60% { transform: translateY(-3px); }
}

/* ==========================================
   SPLASH SCREEN
   ========================================== */
.splash-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100dvh;
  background:
    radial-gradient(50% 35% at 80% 20%, rgba(255,255,255,0.36), transparent 70%),
    radial-gradient(45% 30% at 15% 82%, rgba(255,255,255,0.28), transparent 72%),
    linear-gradient(135deg, #ff9ed5 0%, #c8a0ff 48%, #8bd7ff 100%);
  position: relative;
}

.splash-fairy { font-size: 80px; animation: float 2s ease-in-out infinite; }
.splash-title {
  font-size: 2.2rem; color: white; text-align: center;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.15);
  margin-top: 16px; line-height: 1.3;
}

.splash-sparkles { position: absolute; inset: 0; pointer-events: none; }
.sparkle { position: absolute; font-size: 24px; animation: sparkle 1.5s ease-in-out infinite; }
.s1 { top: 15%; left: 20%; animation-delay: 0s; }
.s2 { top: 25%; right: 15%; animation-delay: 0.3s; }
.s3 { bottom: 30%; left: 15%; animation-delay: 0.6s; }
.s4 { bottom: 20%; right: 20%; animation-delay: 0.9s; }

@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
@keyframes sparkle {
  0%, 100% { opacity: 0.3; transform: scale(0.8) rotate(0deg); }
  50% { opacity: 1; transform: scale(1.2) rotate(180deg); }
}

/* ==========================================
   PROFILE SELECTION
   ========================================== */
.profile-select-container {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; min-height: 100dvh; padding: 24px;
  background: linear-gradient(180deg, var(--bg) 0%, #F0E0FF 100%);
}

.profile-select-header { text-align: center; margin-bottom: 32px; }
.profile-select-fairy { font-size: 60px; animation: float 2s ease-in-out infinite; margin-bottom: 12px; }
.profile-title { font-size: 1.8rem; color: var(--text); }

.profile-cards { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }

.profile-card {
  display: flex; flex-direction: column; align-items: center;
  padding: 28px 24px; border: 3px solid transparent; border-radius: var(--radius);
  background: white; box-shadow: 0 8px 30px var(--shadow);
  cursor: pointer; transition: all 0.3s ease; min-width: 140px;
  font-family: inherit; color: var(--text);
}
.profile-card:active { transform: scale(0.95); }
.profile-dokyung { border-color: var(--pink); }
.profile-sobin { border-color: var(--purple); }
.profile-dokyung:hover { background: #FFF0F3; box-shadow: 0 8px 30px rgba(255,105,180,0.25); }
.profile-sobin:hover { background: #F8F0FF; box-shadow: 0 8px 30px rgba(171,71,188,0.25); }
.profile-card.selected { transform: scale(1.1); box-shadow: 0 12px 40px var(--shadow); }
.profile-add-card { border-style: dashed; }

.profile-create-panel { margin-top: 16px; width: min(480px, 100%); }
.profile-create-box {
  background: white; border-radius: var(--radius); padding: 16px;
  box-shadow: 0 4px 20px var(--shadow);
}
.profile-create-title { font-weight: 700; margin-bottom: 10px; }
.profile-form-row { margin-bottom: 10px; }
.profile-input {
  width: 100%; border: 2px solid var(--primary-light); border-radius: 12px;
  padding: 10px 12px; font: inherit; color: var(--text);
}
.profile-age-grid, .profile-avatar-grid, .profile-theme-grid {
  display: grid; gap: 8px;
}
.profile-age-grid { grid-template-columns: repeat(3, 1fr); }
.profile-avatar-grid { grid-template-columns: repeat(4, 1fr); }
.profile-theme-grid { grid-template-columns: repeat(4, 1fr); }
.age-btn, .avatar-btn, .theme-btn {
  background: white; border: 2px solid var(--primary-light); border-radius: 12px;
  padding: 8px; font: inherit; color: var(--text); cursor: pointer;
}
.avatar-btn { font-size: 1.3rem; }
.theme-btn { text-transform: capitalize; }
.age-btn.active, .avatar-btn.active, .theme-btn.active {
  background: var(--primary); color: white; border-color: var(--primary);
}
.profile-form-actions { display: flex; justify-content: flex-end; margin-bottom: 0; }

.profile-avatar-ring {
  width: 90px; height: 90px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 12px;
}
.pink-ring { background: linear-gradient(135deg, #FFE0E8, #FFB6C1); }
.purple-ring { background: linear-gradient(135deg, #F0E0FF, #CE93D8); }

.profile-avatar { font-size: 50px; }
.profile-name { font-size: 1.5rem; font-weight: 700; }
.profile-desc { font-size: 0.85rem; color: var(--text-light); margin-top: 4px; }
.profile-badge-preview {
  margin-top: 8px; font-size: 0.75rem; color: var(--primary);
  background: #FFF5F9; padding: 4px 12px; border-radius: 50px;
}

/* ==========================================
   HOME SCREEN
   ========================================== */
.home-container {
  padding: 16px;
  background: var(--bg);
  min-height: 100%;
  display: grid;
  gap: 16px;
  align-content: start;
}

.home-section { margin-bottom: 0; }
.home-section-title {
  font-size: 1.1rem; font-weight: 700; margin-bottom: 10px;
  color: var(--text);
  text-shadow: 0 1px 0 rgba(255,255,255,0.7);
}
.today-loop-meta {
  margin: -4px 0 10px;
  font-size: 0.72rem;
  color: var(--text-light);
}
.home-bottom-spacer { height: 16px; }

/* Today's Cards */
.today-cards { display: flex; flex-direction: column; gap: 10px; }

.today-card {
  display: flex; align-items: center; gap: 12px;
  background: linear-gradient(120deg, #ffffff 0%, #fff8ff 100%);
  border: 1px solid rgba(255, 95, 180, 0.2); border-radius: var(--radius-sm);
  padding: 12px 16px; box-shadow: 0 8px 18px var(--shadow);
  cursor: pointer; font-family: inherit; color: var(--text);
  transition: transform 0.2s; text-align: left;
  border-left: 4px solid var(--card-accent, var(--primary));
}
.today-card:active { transform: scale(0.98); }

.today-card-icon { font-size: 1.8rem; }
.today-card-info { flex: 1; }
.today-card-name { font-size: 0.95rem; font-weight: 700; }
.today-card-sub { font-size: 0.75rem; color: var(--text-light); }

.today-card-badge {
  background: var(--primary-light); color: var(--text);
  padding: 4px 10px; border-radius: 50px; font-size: 0.75rem; font-weight: 700;
}
.today-card-badge.complete {
  background: #C8E6C9; color: #2E7D32;
}

/* Mission Summary */
.mission-summary-card {
  display: flex; align-items: center; gap: 12px;
  background: linear-gradient(135deg, #fff6d5, #ffd9f4 42%, #d7f2ff 100%);
  border: none; border-radius: var(--radius-sm); padding: 14px 16px;
  width: 100%; cursor: pointer; font-family: inherit; color: var(--text);
  transition: transform 0.2s;
}
.mission-summary-card:active { transform: scale(0.98); }
.mission-summary-icon { font-size: 1.5rem; }
.mission-summary-text { flex: 1; font-size: 0.95rem; font-weight: 600; text-align: left; }
.mission-summary-streak { font-size: 0.9rem; font-weight: 700; color: #FF5722; }

.market-proof-card {
  width: 100%;
  border: 1px solid rgba(92, 107, 192, 0.25);
  border-radius: var(--radius-sm);
  padding: 12px 14px;
  background: linear-gradient(130deg, #f7f9ff 0%, #ffffff 55%, #fff7ef 100%);
  box-shadow: 0 8px 18px var(--shadow);
  font-family: inherit;
  color: var(--text);
  text-align: left;
  cursor: pointer;
}
.market-proof-card:active { transform: scale(0.98); }
.market-proof-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}
.market-proof-title {
  font-size: 0.9rem;
  font-weight: 800;
}
.market-proof-badge {
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 0.72rem;
  font-weight: 800;
}
.market-proof-badge.is-high {
  background: rgba(67, 160, 71, 0.18);
  color: #2e7d32;
}
.market-proof-badge.is-mid {
  background: rgba(251, 192, 45, 0.2);
  color: #8d6e00;
}
.market-proof-badge.is-low {
  background: rgba(239, 83, 80, 0.18);
  color: #c62828;
}
.market-proof-grid {
  margin-top: 10px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}
.market-proof-item {
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(92, 107, 192, 0.14);
  border-radius: 10px;
  padding: 8px;
}
.market-proof-item strong {
  display: block;
  font-size: 0.88rem;
  color: var(--text);
}
.market-proof-item span {
  display: block;
  margin-top: 3px;
  font-size: 0.67rem;
  color: var(--text-light);
}
.market-proof-tip {
  margin-top: 8px;
  font-size: 0.7rem;
  color: var(--text-light);
}

.kidtime-card {
  border: 1px solid rgba(166,108,255,0.18);
  border-radius: var(--radius-sm);
  background: linear-gradient(120deg, #ffffff 0%, #f9f7ff 100%);
  box-shadow: 0 8px 18px var(--shadow);
  padding: 12px 14px;
}
.kidtime-title {
  font-size: 0.9rem;
  font-weight: 800;
  color: var(--text);
  margin-bottom: 8px;
}
.kidtime-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}
.kidtime-item {
  background: rgba(255,255,255,0.85);
  border: 1px solid rgba(255, 159, 214, 0.25);
  border-radius: 10px;
  padding: 8px;
  text-align: center;
}
.kidtime-label {
  display: block;
  font-size: 0.68rem;
  color: var(--text-light);
  margin-bottom: 4px;
}
.kidtime-item strong {
  font-size: 0.86rem;
  color: var(--text);
}
.kidtime-sub {
  margin-top: 8px;
  font-size: 0.68rem;
  color: var(--text-light);
}

/* ==========================================
   TRAIN CAROUSEL
   ========================================== */
.train-carousel {
  position: relative;
  padding-bottom: 20px;
}

.train-track {
  position: absolute;
  bottom: 10px; left: 0; right: 0;
  height: 6px;
  background: repeating-linear-gradient(90deg, #8D6E63 0px, #8D6E63 20px, #D7CCC8 20px, #D7CCC8 25px);
  border-radius: 3px;
}

.train-cars {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding: 4px 4px 16px;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x proximity;
  scrollbar-width: none;
}
.train-cars::-webkit-scrollbar { display: none; }

.train-car {
  flex-shrink: 0;
  width: 110px;
  background: linear-gradient(160deg, #ffffff 0%, #fff8ff 100%);
  border: none;
  border-radius: 12px 12px 4px 4px;
  cursor: pointer;
  transition: transform 0.2s;
  scroll-snap-align: start;
  position: relative;
  font-family: inherit;
  color: var(--text);
  box-shadow: 0 10px 20px var(--shadow);
  padding: 0;
  overflow: visible;
}
.train-car:active:not(.locked) { transform: scale(0.95); }

.train-roof {
  height: 12px;
  background: var(--roof-color, var(--primary));
  border-radius: 12px 12px 0 0;
}

.train-body {
  padding: 10px 8px;
  text-align: center;
  min-height: 80px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.train-emoji { font-size: 1.5rem; }
.train-label { font-size: 0.7rem; font-weight: 600; line-height: 1.2; }
.train-badge {
  position: absolute; top: -6px; right: -6px;
  font-size: 1rem;
  animation: sparkle 2s ease-in-out infinite;
}
.train-lock {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  background: rgba(255,255,255,0.7); border-radius: 0 0 4px 4px;
  font-size: 1.2rem;
}

.train-car.locked { opacity: 0.6; }
.train-car.complete .train-roof { background: #4CAF50; }

.train-wheels {
  display: flex; justify-content: space-around; padding: 0 8px;
  position: relative; top: 4px;
}
.wheel {
  width: 12px; height: 12px; border-radius: 50%;
  background: #5D4037; border: 2px solid #8D6E63;
  display: inline-block;
}

/* ==========================================
   QUICK PLAY GRID
   ========================================== */
.quick-play-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(108px, 1fr));
  gap: 12px;
  padding: 2px;
}

.quick-play-card {
  width: 100%;
  min-height: 110px;
  background: linear-gradient(155deg, #ffffff 0%, #fff8ff 100%);
  border: 2px solid var(--qp-color, var(--primary-light));
  border-radius: var(--radius-sm); padding: 14px 10px;
  text-align: center; cursor: pointer;
  font-family: inherit; color: var(--text);
  transition: transform 0.2s, box-shadow 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 2px;
}
.quick-play-card:active { transform: scale(0.95); }
.quick-play-card:hover { box-shadow: 0 8px 18px var(--shadow); }
.qp-icon { font-size: 1.8rem; display: block; margin-bottom: 6px; }
.qp-name { font-size: 0.75rem; font-weight: 600; line-height: 1.3; }

/* ==========================================
   CATEGORY DETAIL (Stages)
   ========================================== */
.category-detail-container {
  padding: 16px; background: var(--bg); min-height: 100%;
}

.stages-list { display: flex; flex-direction: column; gap: 12px; margin-top: 16px; }

.stage-card {
  display: flex; align-items: center; justify-content: space-between;
  background: white; border: none; border-radius: var(--radius);
  padding: 16px; box-shadow: 0 3px 15px var(--shadow);
  cursor: pointer; font-family: inherit; color: var(--text);
  transition: transform 0.2s;
}
.stage-card:active:not(.locked) { transform: scale(0.98); }
.stage-card.locked { opacity: 0.5; cursor: default; }
.stage-card.complete { border-left: 4px solid #4CAF50; }

.stage-left { display: flex; align-items: center; gap: 12px; }

.stage-number {
  width: 40px; height: 40px; border-radius: 50%;
  background: var(--stage-color, var(--primary));
  color: white; display: flex; align-items: center; justify-content: center;
  font-size: 1.1rem; font-weight: 700; flex-shrink: 0;
}
.stage-number.done { background: #4CAF50; }

.stage-info { text-align: left; }
.stage-name { font-size: 1rem; font-weight: 700; }
.stage-subtitle { font-size: 0.8rem; color: var(--text-light); }

.stage-right { flex-shrink: 0; }
.stage-lock { font-size: 1.3rem; }

/* Progress Ring */
.stage-progress-ring { width: 44px; height: 44px; position: relative; }
.stage-ring-svg { width: 100%; height: 100%; transform: rotate(-90deg); }
.stage-ring-bg {
  fill: none; stroke: #f0e0f0; stroke-width: 3;
}
.stage-ring-fill {
  fill: none; stroke-width: 3; stroke-linecap: round;
  transition: stroke-dasharray 0.5s;
}
.stage-ring-text {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.6rem; font-weight: 700;
}

.combine-section, .stage-game-section { margin-top: 20px; }
.stage-section-title { font-size: 1rem; font-weight: 700; margin-bottom: 8px; }
.stage-game-btn {
  background: var(--gold); border: none; border-radius: var(--radius-sm);
  padding: 12px 24px; font-size: 1rem; font-weight: 700;
  font-family: inherit; color: var(--text); cursor: pointer;
  transition: transform 0.2s;
}
.stage-game-btn:active { transform: scale(0.95); }

/* ==========================================
   LEARN SCREEN (Cards)
   ========================================== */
.learn-container {
  display: flex; flex-direction: column;
  min-height: 100%; padding: 16px; background: var(--bg);
}

.learn-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 16px;
}

.btn-back {
  background: white; border: 2px solid var(--primary-light);
  border-radius: 50%; width: 44px; height: 44px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.2rem; cursor: pointer; transition: all 0.2s;
  font-family: inherit; color: var(--text);
}
.btn-back:active { background: var(--primary-light); }
.back-arrow { display: block; }

.learn-title { font-size: 1.2rem; color: var(--primary); font-weight: 700; }
.learn-counter {
  font-size: 0.85rem; color: var(--text-light);
  background: white; padding: 6px 12px; border-radius: 50px;
}

.learn-card-area {
  flex: 1; display: flex; align-items: center;
  justify-content: center; min-height: 280px;
}

.learn-card {
  width: 100%; max-width: 320px; background: white;
  border-radius: 24px; padding: 28px 20px;
  box-shadow: 0 12px 40px var(--shadow); text-align: center;
  border: 3px solid var(--card-color, var(--primary-light));
  position: relative; overflow: hidden;
}

.learn-card-inner { position: relative; z-index: 1; }
.card-enter { animation: cardEnter 0.3s ease; }
@keyframes cardEnter {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

.card-emoji { font-size: 56px; margin-bottom: 10px; }
.card-char { font-weight: 800; line-height: 1.2; color: var(--text); margin-bottom: 6px; }
.card-word { font-size: 1.2rem; font-weight: 600; color: var(--text); margin-bottom: 4px; }
.card-pronunciation { font-size: 0.9rem; color: var(--text-light); }

.learn-nav {
  display: flex; align-items: center; justify-content: center;
  gap: 20px; margin: 16px 0 8px;
}

.btn-nav {
  background: white; border: 2px solid var(--primary-light);
  border-radius: 50%; width: 48px; height: 48px;
  font-size: 1.2rem; cursor: pointer; transition: all 0.2s;
  display: flex; align-items: center; justify-content: center;
  font-family: inherit; color: var(--text);
}
.btn-nav:disabled { opacity: 0.3; }
.btn-nav:active:not(:disabled) { background: var(--primary-light); }

.btn-sound {
  background: var(--primary); border: none; border-radius: 50%;
  width: 60px; height: 60px; font-size: 1.6rem; cursor: pointer;
  box-shadow: 0 4px 15px rgba(255,105,180,0.3); transition: all 0.2s;
}
.btn-sound:active { transform: scale(0.9); }

.learn-dots {
  display: flex; justify-content: center; gap: 5px;
  padding: 6px 0 16px; flex-wrap: wrap;
}
.dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--primary-light); opacity: 0.4;
  cursor: pointer; transition: all 0.3s;
}
.dot.active { opacity: 1; transform: scale(1.3); background: var(--primary); }

/* ==========================================
   GAME SELECTION
   ========================================== */
.game-select-container {
  min-height: 100%; padding: 16px; background: var(--bg);
}
.play-hub-title {
  font-size: 1.3rem; font-weight: 700; text-align: center;
  margin: 16px 0; color: var(--primary);
}
.game-mode-cards {
  display: flex; flex-direction: column; gap: 12px; margin-top: 12px;
}
.game-mode-card {
  background: white; border: none; border-radius: var(--radius);
  padding: 18px 16px; display: flex; align-items: center;
  gap: 14px; box-shadow: 0 3px 15px var(--shadow);
  cursor: pointer; transition: all 0.2s; text-align: left;
  font-family: inherit; color: var(--text);
  min-height: 78px;
}
.game-mode-card:active { transform: scale(0.98); }
.game-mode-icon { font-size: 2rem; flex-shrink: 0; }
.game-mode-name { font-size: 1.05rem; font-weight: 700; }
.game-mode-desc { font-size: 0.8rem; color: var(--text-light); }

/* ==========================================
   QUIZ & SOUND FIND
   ========================================== */
.quiz-container, .sound-container {
  min-height: 100%; padding: 16px; background: var(--bg);
  display: flex; flex-direction: column;
}

.game-score {
  font-size: 0.9rem; background: var(--gold);
  padding: 4px 10px; border-radius: 50px; font-weight: 700;
}

.quiz-progress {
  height: 6px; background: #F0E0F0; border-radius: 3px;
  margin-bottom: 16px; overflow: hidden;
}
.quiz-progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-light), var(--primary));
  border-radius: 3px; transition: width 0.3s ease;
}

.quiz-question {
  text-align: center; margin-bottom: 20px; flex: 1;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
}
.quiz-emoji { font-size: 72px; margin-bottom: 10px; }
.quiz-word { font-size: 1.4rem; font-weight: 700; color: var(--text); }

.quiz-choices { display: grid; gap: 10px; margin-bottom: 20px; }
.choices-2 { grid-template-columns: repeat(2, 1fr); }
.choices-4 { grid-template-columns: repeat(2, 1fr); }

.quiz-choice {
  background: white; border: 3px solid var(--primary-light);
  border-radius: var(--radius); padding: 16px 10px;
  text-align: center; cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s, border-color 0.2s;
  font-family: inherit; display: flex; flex-direction: column;
  align-items: center; gap: 4px;
}
.quiz-choice:active:not(:disabled) { transform: scale(0.95); }
.choice-char { font-weight: 800; color: var(--text); display: block; }
.choice-emoji { font-size: 1.1rem; }

.quiz-choice.correct { background: #C8E6C9; border-color: #4CAF50; animation: correctPulse 0.5s ease; }
.quiz-choice.wrong { background: #FFCDD2; border-color: #EF5350; animation: wrongShake 0.4s ease; }
.quiz-choice:disabled { opacity: 0.6; }

.quiz-hint { text-align: center; color: var(--primary); font-size: 0.85rem; animation: fadeIn 0.5s; }
.hint-glow { animation: hintGlow 1s ease-in-out infinite !important; border-color: var(--gold) !important; }

@keyframes correctPulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
@keyframes wrongShake { 0%,100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }
@keyframes hintGlow { 0%,100% { box-shadow: 0 0 5px var(--gold); } 50% { box-shadow: 0 0 20px var(--gold), 0 0 40px var(--gold); } }

/* Sound Find */
.sound-prompt {
  text-align: center; flex: 1;
  display: flex; align-items: center; justify-content: center;
}
.btn-play-sound {
  background: white; border: 3px solid var(--primary);
  border-radius: 50%; width: 110px; height: 110px;
  font-size: 2.5rem; cursor: pointer;
  box-shadow: 0 8px 30px var(--shadow);
  transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; font-family: inherit; color: var(--text);
}
.btn-play-sound:active { transform: scale(0.9); }
.sound-label { font-size: 0.75rem; margin-top: 4px; }

/* ==========================================
   MATCHING
   ========================================== */
.matching-container { min-height: 100%; padding: 16px; background: var(--bg); }
.matching-grid {
  display: grid; gap: 10px; margin-top: 20px; justify-items: center;
}
.cols-2 { grid-template-columns: repeat(2, 1fr); }
.cols-4 { grid-template-columns: repeat(4, 1fr); }

.matching-card {
  width: 100%; aspect-ratio: 1; max-width: 100px;
  perspective: 600px; cursor: pointer;
  background: none; border: none; padding: 0; font-family: inherit;
}
.matching-card-inner {
  width: 100%; height: 100%; position: relative;
  transform-style: preserve-3d; transition: transform 0.5s ease;
  border-radius: var(--radius);
}
.matching-card.flipped .matching-card-inner,
.matching-card.matched .matching-card-inner { transform: rotateY(180deg); }

.matching-card-front, .matching-card-back {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  border-radius: var(--radius);
  backface-visibility: hidden; -webkit-backface-visibility: hidden;
}
.matching-card-front {
  background: linear-gradient(135deg, var(--primary-light), var(--primary));
  color: white; font-size: 1.5rem; font-weight: 700;
  box-shadow: 0 3px 12px var(--shadow);
}
.matching-card-back {
  background: white; border: 3px solid var(--primary-light);
  transform: rotateY(180deg); font-weight: 700; color: var(--text);
}
.matching-card.matched .matching-card-back {
  border-color: #4CAF50; background: #E8F5E9;
}

/* ==========================================
   TRACING (Canvas)
   ========================================== */
.tracing-container {
  min-height: 100%; padding: 16px; background: var(--bg);
  display: flex; flex-direction: column;
}

.tracing-area {
  flex: 1; display: flex; align-items: center; justify-content: center;
  position: relative; margin: 16px 0;
}

.tracing-char-bg {
  position: absolute; font-size: 180px; font-weight: 800;
  color: rgba(0,0,0,0.09); user-select: none;
  pointer-events: none; z-index: 0;
}

#tracing-canvas {
  border: 3px dashed var(--primary);
  border-radius: var(--radius);
  background: rgba(255,255,255,0.95);
  touch-action: none;
  position: relative; z-index: 1;
  max-width: 300px; max-height: 300px;
  box-shadow: 0 8px 20px rgba(61, 36, 92, 0.12);
}

.tracing-buttons {
  display: flex; gap: 10px; justify-content: center; padding: 12px 0;
}

.tracing-success { animation: correctPulse 0.5s ease; }
.tracing-shake { animation: wrongShake 0.4s ease; }

/* ==========================================
   COUNTING GAME
   ========================================== */
.counting-container {
  min-height: 100%; padding: 16px; background: var(--bg);
  display: flex; flex-direction: column;
}

.counting-buddy {
  display: flex; align-items: center; gap: 10px;
  margin-top: 10px; padding: 10px 14px;
  border-radius: 18px;
  border: 2px solid #F5B3E4;
  background: linear-gradient(135deg, #FFF7FD, #F2EDFF);
  box-shadow: 0 6px 16px rgba(203, 115, 190, 0.2);
}

.tracing-buddy {
  margin: 8px auto 2px;
  width: min(100%, 420px);
}

.counting-buddy-icon {
  font-size: 2rem;
  line-height: 1;
  filter: drop-shadow(0 3px 4px rgba(0, 0, 0, 0.15));
}

.counting-buddy-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.counting-buddy-text strong {
  color: #9C1D6B;
  font-size: 0.98rem;
  font-weight: 800;
}

.counting-buddy-text span {
  color: #4B4A77;
  font-size: 0.92rem;
  font-weight: 700;
}

.counting-question {
  text-align: center; font-size: 1.3rem; font-weight: 700;
  margin: 16px 0; color: var(--primary);
}

.counting-scene {
  align-self: center;
  margin: -6px 0 10px;
  padding: 6px 12px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 95, 180, 0.25);
  color: #7b4f9f;
  font-size: 0.8rem;
  font-weight: 700;
}

.counting-emoji-area {
  flex: 1; position: relative;
  background: white; border-radius: var(--radius);
  box-shadow: 0 4px 20px var(--shadow);
  min-height: 220px; margin-bottom: 16px;
}

.counting-emoji {
  position: absolute; font-size: clamp(2rem, 6.5vw, 2.6rem); cursor: pointer;
  transition: transform 0.3s; user-select: none;
}
.counting-emoji.counted {
  transform: scale(1.3);
  filter: drop-shadow(0 0 8px var(--gold));
}

.counting-counter {
  position: absolute; top: 8px; right: 12px;
  background: var(--gold); padding: 4px 14px;
  border-radius: 50px; font-size: 1.2rem; font-weight: 700;
}

.counting-choices {
  display: flex; gap: 10px; justify-content: center;
  flex-wrap: wrap;
  padding: 8px 0;
}

.counting-choice {
  width: 56px; height: 56px; border-radius: 50%;
  min-width: 56px;
  background: white; border: 3px solid var(--primary-light);
  font-size: 1.5rem; font-weight: 800;
  cursor: pointer; transition: all 0.2s;
  font-family: inherit; color: var(--text);
}
.counting-choice:active { transform: scale(0.9); }
.counting-choice.correct { background: #C8E6C9; border-color: #4CAF50; }
.counting-choice.wrong { background: #FFCDD2; border-color: #EF5350; }

.block-count-container .counting-question {
  margin-top: 4px;
}

.block-scene {
  position: relative;
  height: 270px;
  border-radius: 20px;
  margin: 8px 0 12px;
  background:
    linear-gradient(180deg, #eaf4ff 0%, #dbeeff 58%, #c8e2ff 58%, #b7d6fb 100%);
  border: 2px solid #c7ddff;
  overflow: hidden;
}

.block-scene::before {
  content: "";
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: 20px;
  height: 2px;
  background: rgba(78, 121, 187, 0.3);
  box-shadow:
    0 -26px 0 rgba(78, 121, 187, 0.15),
    0 -52px 0 rgba(78, 121, 187, 0.1);
}

.iso-stack {
  position: absolute;
  left: 50%;
  top: 62%;
  transform: translate(
    calc((var(--gx) - var(--gy)) * 26px),
    calc((var(--gx) + var(--gy)) * 13px)
  );
}

.iso-cube {
  --cube-size: 32px;
  position: absolute;
  width: var(--cube-size);
  height: var(--cube-size);
  left: calc(var(--cube-size) * -0.5);
  top: calc(var(--z) * -20px);
}

.iso-cube::before,
.iso-cube::after {
  content: "";
  position: absolute;
  inset: 0;
}

.iso-cube::before {
  background: #9ec6ff;
  clip-path: polygon(50% 0%, 100% 25%, 50% 50%, 0% 25%);
  transform: translateY(-16px);
  border: 1px solid #6a9adb;
}

.iso-cube::after {
  background:
    linear-gradient(90deg, #6fa1e2 0 50%, #4f7fc2 50% 100%);
  clip-path: polygon(0% 25%, 50% 50%, 50% 100%, 0% 75%, 0% 25%);
  box-shadow: 16px 8px 0 0 #5f8fd0;
}

/* ==========================================
   HANGUL COMBINATION
   ========================================== */
.combine-container {
  min-height: 100%; padding: 16px; background: var(--bg);
}

.combine-result-area {
  background: white; border-radius: var(--radius);
  padding: 24px; margin: 16px 0; text-align: center;
  box-shadow: 0 4px 20px var(--shadow);
}

.combine-formula {
  display: flex; align-items: center; justify-content: center; gap: 12px;
}

.combine-slot {
  width: 60px; height: 60px;
  display: flex; align-items: center; justify-content: center;
  font-size: 2rem; font-weight: 800;
  border: 3px dashed var(--primary-light);
  border-radius: var(--radius-sm);
  background: #FFF5F9;
}

.combine-plus, .combine-equals {
  font-size: 1.5rem; font-weight: 700; color: var(--text-light);
}

.result-slot { border-color: var(--gold); background: #FFF9E0; }
.combine-success {
  animation: correctPulse 0.5s ease;
  background: #C8E6C9 !important;
  border-color: #4CAF50 !important;
}

.combine-section-label {
  font-size: 0.9rem; font-weight: 700; color: var(--text-light);
  margin: 16px 0 8px;
}

.combine-grid {
  display: grid; grid-template-columns: repeat(5, 1fr);
  gap: 8px;
}

.combine-btn {
  background: white; border: 2px solid var(--primary-light);
  border-radius: var(--radius-sm); padding: 12px 4px;
  font-size: 1.3rem; font-weight: 700;
  cursor: pointer; transition: all 0.2s;
  font-family: inherit; color: var(--text);
}
.combine-btn:active { transform: scale(0.95); }
.combine-btn.selected {
  background: var(--primary); color: white;
  border-color: var(--primary);
}

/* ==========================================
   COLORING
   ========================================== */
.coloring-select-container {
  min-height: 100%;
  padding: 16px;
  background: linear-gradient(180deg, #fff7fb 0%, #f6fbff 100%);
}

.coloring-design-controls {
  display: flex;
  justify-content: flex-start;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 8px;
}

.coloring-hero-card {
  background: linear-gradient(140deg, #ff9bc7 0%, #ff70a6 45%, #7cc8ff 100%);
  border-radius: 18px;
  padding: 14px;
  color: white;
  box-shadow: 0 10px 28px rgba(74, 51, 71, 0.2);
}

.coloring-hero-title {
  font-size: 0.95rem;
  font-weight: 800;
  margin-bottom: 8px;
}

.coloring-hero-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.coloring-hero-import {
  margin-top: 10px;
  display: flex;
  justify-content: flex-start;
}

.coloring-ai-key-row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  align-items: center;
  margin-bottom: 8px;
}

.coloring-ai-status {
  font-size: 0.74rem;
  font-weight: 700;
  color: #4f3d74;
  background: rgba(255, 255, 255, 0.72);
  border-radius: 10px;
  padding: 6px 8px;
  margin-bottom: 8px;
}

.coloring-prompt-input {
  flex: 1 1 180px;
  min-width: 170px;
  border: 2px solid rgba(255, 255, 255, 0.75);
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.96);
  color: #5a386f;
  font-family: inherit;
  font-size: 0.8rem;
  font-weight: 700;
  padding: 8px 12px;
  outline: none;
}

.coloring-prompt-input:focus {
  border-color: #ffd3ef;
  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.35);
}

.coloring-mini-btn {
  border: 0;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.9);
  color: #6a2e4e;
  font-family: inherit;
  font-size: 0.75rem;
  font-weight: 700;
  padding: 8px 12px;
  cursor: pointer;
}

.coloring-mini-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.coloring-upload-input {
  display: none;
}

.coloring-section-title {
  margin-top: 16px;
  margin-bottom: 10px;
  font-size: 0.92rem;
  color: var(--text);
  font-weight: 800;
}

.coloring-age-section {
  margin-top: 18px;
}

.coloring-age-head {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.coloring-age-badge {
  display: inline-block;
  margin-left: 6px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 0.68rem;
  background: #ffd6ec;
  color: #6a2e4e;
  vertical-align: middle;
}

.coloring-section-subtitle {
  margin: -4px 0 8px;
  font-size: 0.72rem;
  color: #6f6f7c;
  font-weight: 700;
}

.coloring-section-count {
  margin: -2px 0 8px;
  font-size: 0.72rem;
  color: #5f4d8a;
  font-weight: 800;
}

.coloring-library-details {
  margin-top: 18px;
  border: 1px solid #ebdef7;
  border-radius: 14px;
  background: #fff;
  padding: 10px;
}

.coloring-library-details summary {
  cursor: pointer;
  font-size: 0.84rem;
  font-weight: 800;
  color: #5f4d8a;
  user-select: none;
  margin-bottom: 10px;
}

.coloring-prompt-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.coloring-prompt-chip {
  border: 1px solid #e8dfff;
  border-radius: 12px;
  background: #fff;
  font-family: inherit;
  font-size: 0.75rem;
  font-weight: 700;
  color: #5f4d8a;
  padding: 7px 6px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  cursor: pointer;
}

.coloring-prompt-chip:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.coloring-designs-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

.coloring-design-card {
  background: linear-gradient(155deg, #ffffff 0%, #fff7ff 100%);
  border: 2px solid #ffd3e7;
  border-radius: 18px;
  padding: 12px;
  min-height: 176px;
  text-align: center;
  cursor: pointer;
  transition: transform 0.2s;
  font-family: inherit;
  color: var(--text);
  position: relative;
  box-shadow: 0 8px 20px rgba(79, 63, 122, 0.12);
}

.coloring-design-card.ai-card {
  border-color: #d8cbff;
}

.coloring-design-card:active { transform: scale(0.97); }

.design-emoji {
  font-size: 3rem;
  margin-top: 6px;
  margin-bottom: 10px;
}

.design-thumb-wrap {
  width: 100%;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #ece6ff;
  background: #fff;
  margin-bottom: 8px;
}

.design-thumb {
  width: 100%;
  aspect-ratio: 1/1;
  object-fit: cover;
  display: block;
}

.design-name { font-size: 0.85rem; font-weight: 700; }

.design-preview-img {
  width: min(96px, 100%);
  aspect-ratio: 1 / 1;
  object-fit: contain;
  display: block;
  margin: 0 auto 8px;
}

.design-sheet-thumb {
  width: min(92px, 100%);
  aspect-ratio: 1 / 1;
  margin: 0 auto 8px;
  border-radius: 14px;
  overflow: hidden;
  position: relative;
  border: 1px solid #ece6ff;
  background: #fff;
}

.design-sheet-thumb img {
  position: absolute;
  max-width: none;
  user-select: none;
  pointer-events: none;
}

.design-done-badge {
  position: absolute;
  top: -6px;
  right: -6px;
  background: #4CAF50;
  color: white;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  font-size: 0.72rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.coloring-ai-empty {
  background: #fff;
  border: 1px dashed #d7c8ff;
  border-radius: 14px;
  padding: 14px;
  color: #5e5c86;
  font-size: 0.82rem;
}

.coloring-container {
  min-height: 100%;
  padding: 14px;
  background: linear-gradient(180deg, #fff7fb 0%, #f6fbff 100%);
  display: flex;
  flex-direction: column;
}

.coloring-stage-actions {
  display: flex;
  justify-content: center;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 8px;
}

.coloring-canvas-area {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
  min-height: clamp(420px, 72vh, 900px);
}

.coloring-canvas-stack {
  position: relative;
  width: min(100%, 980px);
  aspect-ratio: var(--canvas-ratio, 1/1);
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(79, 63, 122, 0.2);
  background: white;
}

.coloring-template-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: none;
  z-index: 1;
  touch-action: none;
}

.coloring-svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  background: white;
  padding: 8px;
  z-index: 2;
}

.coloring-ai-image {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  background: white;
  z-index: 2;
  pointer-events: none;
}

.coloring-region { cursor: pointer; transition: transform 0.2s; }
.coloring-region:hover { filter: brightness(1.1); }

.coloring-palette {
  display: flex;
  justify-content: center;
  gap: 8px;
  padding: 10px 0;
  flex-wrap: wrap;
  max-width: 380px;
  margin: 0 auto;
}

.palette-color {
  width: clamp(36px, 9vw, 46px);
  height: clamp(36px, 9vw, 46px);
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 4px 10px rgba(0,0,0,0.14);
}
.palette-color.selected {
  border-color: var(--text);
  transform: scale(1.08);
  box-shadow: 0 0 14px rgba(0,0,0,0.22);
}

.coloring-actions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(108px, 1fr));
  gap: 10px;
  justify-content: center;
  padding: 8px 0;
  width: min(100%, 620px);
  margin: 0 auto;
}

.coloring-actions .tool-btn {
  width: 100%;
  min-height: 42px;
}

.advanced-controls-row {
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 10px;
}

.background-row {
  display: flex;
  justify-content: center;
  margin-top: 8px;
}

.canvas-bg-input {
  width: 48px;
  height: 36px;
  border: 2px solid var(--primary-light);
  border-radius: 10px;
  background: #fff;
  padding: 2px;
  cursor: pointer;
}

.coloring-draw-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 4;
}

.coloring-grid-overlay {
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
  background-image:
    linear-gradient(to right, rgba(109, 95, 149, 0.16) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(109, 95, 149, 0.16) 1px, transparent 1px);
  display: none;
}

.ai-mode .coloring-draw-canvas {
  z-index: 1;
}

.coloring-toolbar {
  background: white;
  border-radius: 14px;
  padding: 10px;
  box-shadow: 0 2px 12px var(--shadow);
  margin-bottom: 10px;
}
.tool-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  flex-wrap: wrap;
}
.tool-btn {
  border: 2px solid var(--primary-light);
  background: white;
  color: var(--text);
  border-radius: 10px;
  padding: 7px 11px;
  font: inherit;
  cursor: pointer;
  font-size: 0.82rem;
}

.tool-btn.mode-btn {
  min-width: 68px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  padding: 6px 8px;
}

.mode-icon {
  font-size: 1.1rem;
  line-height: 1;
}

.mode-label {
  font-size: 0.68rem;
  line-height: 1.1;
  font-weight: 700;
  white-space: nowrap;
}
.tool-btn.active {
  background: var(--primary); color: white; border-color: var(--primary);
}
.tool-btn:disabled,
.tool-btn.disabled {
  opacity: 0.4;
  cursor: not-allowed;
}
.brush-size-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
}

.brush-opacity-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
}
.size-btn {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  border: 2px solid var(--primary-light);
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
.size-dot {
  background: var(--text); border-radius: 50%; display: block;
}
.size-btn.active { border-color: var(--primary); background: var(--primary-light); }

.sticker-picker {
  display: flex;
  justify-content: center;
  gap: 6px;
  flex-wrap: wrap;
  margin-top: 8px;
}
.sticker-btn {
  width: 38px;
  height: 38px;
  border-radius: 10px;
  border: 2px solid var(--primary-light);
  background: white;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  cursor: pointer;
  line-height: 1;
}
.sticker-btn.active { border-color: var(--primary); background: var(--primary-light); }
.sticker-sheet-thumb {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  overflow: hidden;
  position: relative;
  display: inline-block;
}
.sticker-sheet-thumb img {
  position: absolute;
  max-width: none;
  user-select: none;
  pointer-events: none;
}
.sticker-emoji-thumb {
  font-size: 1.15rem;
}

.coloring-ai-hint {
  margin-top: 8px;
  font-size: 0.74rem;
  color: #6d5f95;
  text-align: center;
}

/* Gallery */
.gallery-section { margin-top: 24px; }
.gallery-grid {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: 10px; margin-top: 8px;
}
.gallery-item {
  background: white; border-radius: var(--radius-sm);
  padding: 10px; text-align: center;
  box-shadow: 0 2px 8px var(--shadow);
}
.gallery-mini-svg { font-size: 2rem; }
.gallery-mini-thumb {
  width: 100%;
  aspect-ratio: 1/1;
  object-fit: cover;
  border-radius: 10px;
  border: 1px solid #ede4ff;
  display: block;
  margin: 0 auto;
}
.gallery-date { font-size: 0.7rem; color: var(--text-light); margin-top: 4px; }

.popup-actions-row {
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: wrap;
}

/* ==========================================
   REWARD SCREEN
   ========================================== */
.reward-container {
  min-height: 100%; padding: 16px; padding-bottom: 24px;
  background: var(--bg);
}

.reward-section {
  background: white; border-radius: var(--radius);
  padding: 16px; margin-bottom: 12px;
  box-shadow: 0 3px 15px var(--shadow);
}

.reward-section-title {
  font-size: 1rem; margin-bottom: 10px; color: var(--text); font-weight: 700;
}

/* Level display */
.level-section {
  background: linear-gradient(135deg, #FFF9E0, #FFE082) !important;
}
.level-display {
  display: flex; align-items: center; gap: 16px;
}
.level-icon-big { font-size: 3rem; }
.level-info { flex: 1; }
.level-name-big { font-size: 1.2rem; font-weight: 700; margin-bottom: 6px; }
.level-xp-bar {
  height: 10px; background: rgba(0,0,0,0.1);
  border-radius: 5px; overflow: hidden; margin-bottom: 4px;
}
.level-xp-fill {
  height: 100%;
  background: linear-gradient(90deg, #FFD54F, #FF9800);
  border-radius: 5px; transition: width 0.5s;
}
.level-xp-text { font-size: 0.75rem; color: var(--text-light); }

/* Stars */
.star-counter-big {
  font-size: 1.4rem; word-break: break-all; line-height: 1.8;
}
.more-stars { font-size: 0.9rem; color: var(--text-light); margin-left: 4px; }

/* Stickers */
.sticker-grid {
  display: grid; grid-template-columns: repeat(6, 1fr); gap: 6px;
}
.sticker-slot {
  aspect-ratio: 1; display: flex; align-items: center;
  justify-content: center; font-size: 1.3rem;
  border-radius: var(--radius-sm); transition: all 0.3s;
}
.sticker-slot.collected { background: #FFF9E0; animation: stickerShine 3s ease-in-out infinite; }
.sticker-slot.locked { background: #F5F0F5; opacity: 0.5; font-size: 0.9rem; }

@keyframes stickerShine { 0%,100% { box-shadow: none; } 50% { box-shadow: 0 0 8px var(--gold); } }

/* Badges */
.badge-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
}
.badge-slot {
  text-align: center; padding: 10px 6px;
  border-radius: var(--radius-sm); transition: all 0.3s;
}
.badge-slot.earned { background: linear-gradient(135deg, #FFF9E0, #FFF3C4); }
.badge-slot.locked { opacity: 0.4; }
.badge-icon { font-size: 1.8rem; margin-bottom: 4px; }
.badge-name { font-size: 0.7rem; font-weight: 700; color: var(--text); }
.badge-desc { font-size: 0.6rem; color: var(--text-light); margin-top: 2px; }

/* ==========================================
   ATTENDANCE & MISSIONS
   ========================================== */
.attendance-container {
  min-height: 100%; padding: 16px; background: var(--bg);
}

.streak-banner {
  display: flex; align-items: center; justify-content: center;
  gap: 8px; background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
  padding: 12px; border-radius: var(--radius); margin-bottom: 16px;
}
.streak-fire { font-size: 1.5rem; }
.streak-count { font-size: 1.1rem; font-weight: 700; color: #E65100; }

/* Calendar */
.calendar-container { margin-top: 8px; }
.cal-header-row {
  display: grid; grid-template-columns: repeat(7, 1fr);
  text-align: center; font-size: 0.7rem; font-weight: 700;
  color: var(--text-light); margin-bottom: 4px;
}
.cal-grid {
  display: grid; grid-template-columns: repeat(7, 1fr); gap: 3px;
}
.cal-empty { aspect-ratio: 1; }
.cal-day {
  aspect-ratio: 1; display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  font-size: 0.8rem; font-weight: 600; border-radius: 8px;
  position: relative;
}
.cal-day.today { background: var(--primary-light); color: white; }
.cal-day.attended { background: #FFF9E0; }
.cal-star {
  font-size: 0.5rem; position: absolute; bottom: 1px;
}
.attendance-summary {
  text-align: center; font-size: 0.8rem;
  color: var(--text-light); margin-top: 8px;
}

/* Missions */
.missions-list { display: flex; flex-direction: column; gap: 8px; }

.mission-card {
  display: flex; align-items: center; gap: 10px;
  padding: 10px; border-radius: var(--radius-sm);
  background: #FAFAFA;
}
.mission-card.done { background: #E8F5E9; }
.mission-icon { font-size: 1.3rem; flex-shrink: 0; }
.mission-info { flex: 1; }
.mission-text { font-size: 0.85rem; font-weight: 600; margin-bottom: 4px; }
.mission-progress-bar {
  height: 5px; background: #E0E0E0; border-radius: 3px; overflow: hidden;
}
.mission-progress-fill {
  height: 100%; background: var(--primary); border-radius: 3px;
  transition: width 0.3s;
}
.mission-status { font-size: 0.8rem; font-weight: 700; color: var(--text-light); flex-shrink: 0; }
.mission-empty {
  text-align: center; padding: 16px; color: var(--text-light);
  font-size: 0.9rem;
}
.missions-complete-banner {
  text-align: center; padding: 12px; margin-top: 8px;
  background: linear-gradient(135deg, #FFF9E0, #FFE082);
  border-radius: var(--radius-sm); font-weight: 700;
}

/* ==========================================
   PARENT PAGE
   ========================================== */
.parent-container {
  min-height: 100%; padding: 16px; background: #F5F5F5;
}
.parent-header { margin-bottom: 16px; }
.parent-title { font-size: 1.2rem; font-weight: 700; }

.parent-profile-section {
  background: white; border-radius: var(--radius);
  padding: 16px; margin-bottom: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.parent-profile-header {
  display: flex; align-items: center; gap: 10px;
  margin-bottom: 16px;
}
.parent-avatar { font-size: 2rem; }
.parent-name { font-size: 1.1rem; font-weight: 700; flex: 1; }
.parent-level { font-size: 0.85rem; font-weight: 700; color: var(--primary); }

.parent-stats-grid {
  display: grid; grid-template-columns: repeat(4, 1fr);
  gap: 8px; margin-bottom: 16px;
}
.parent-stat {
  text-align: center; padding: 8px;
  background: #F9F9F9; border-radius: 8px;
}
.parent-stat-value { font-size: 1.2rem; font-weight: 800; color: var(--primary); }
.parent-stat-label { font-size: 0.6rem; color: var(--text-light); margin-top: 2px; }

.parent-category-progress { margin-bottom: 16px; }
.parent-category-progress h4 { font-size: 0.85rem; margin-bottom: 8px; }

.parent-progress-row {
  display: flex; align-items: center; gap: 8px; margin-bottom: 6px;
}
.parent-progress-label { font-size: 0.8rem; width: 60px; flex-shrink: 0; }
.parent-progress-bar {
  flex: 1; height: 8px; background: #EEEEEE;
  border-radius: 4px; overflow: hidden;
}
.parent-progress-fill { height: 100%; border-radius: 4px; transition: width 0.5s; }
.parent-progress-text { font-size: 0.75rem; font-weight: 700; width: 32px; text-align: right; }

.parent-cognitive-card {
  margin-bottom: 14px;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid rgba(92, 107, 192, 0.25);
  background: linear-gradient(180deg, #f7f8ff 0%, #f0f5ff 100%);
}
.parent-cognitive-card h4 {
  margin-bottom: 8px;
  font-size: 0.84rem;
  color: #32457e;
}
.parent-cognitive-list {
  display: grid;
  gap: 8px;
}
.parent-cognitive-actions {
  margin-top: 8px;
  display: flex;
  justify-content: flex-end;
}
.parent-cognitive-row {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(92, 107, 192, 0.15);
  border-radius: 10px;
  padding: 8px;
}
.parent-cognitive-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 4px;
}
.parent-cognitive-label {
  font-size: 0.75rem;
  color: #2f3d69;
  font-weight: 700;
}
.parent-cognitive-value {
  font-size: 0.72rem;
  color: #2f3d69;
  font-weight: 800;
}
.parent-cognitive-bar {
  height: 8px;
  border-radius: 999px;
  background: #dce4ff;
  overflow: hidden;
}
.parent-cognitive-fill {
  height: 100%;
  border-radius: 999px;
  background: linear-gradient(90deg, #6a8bff 0%, #4f6bd8 100%);
  transition: width 0.35s ease;
}
.parent-cognitive-hint {
  margin-top: 4px;
  font-size: 0.66rem;
  color: #5f6f9f;
}

.parent-weekly { margin-bottom: 16px; }
.parent-weekly h4 { font-size: 0.85rem; margin-bottom: 8px; }

.parent-weekly-chart {
  display: flex; align-items: flex-end; gap: 6px;
  height: 80px;
}
.parent-weekly-bar {
  flex: 1; display: flex; flex-direction: column;
  align-items: center; height: 100%;
  justify-content: flex-end;
}
.parent-bar-fill {
  width: 100%; border-radius: 4px 4px 0 0;
  background: #E0E0E0; transition: height 0.5s;
}
.parent-bar-fill.active { background: var(--primary); }
.parent-bar-label { font-size: 0.65rem; margin-top: 4px; color: var(--text-light); }

.parent-actions {
  text-align: center; margin-top: 16px;
  display: grid;
  gap: 8px;
}
.parent-reset-btn { color: #EF5350; border-color: #EF5350; }
.parent-report-btn { border-color: #7E57C2; color: #5E35B1; }

.parent-usage-card {
  border: 1px solid rgba(166,108,255,0.2);
  border-radius: 12px;
  padding: 10px;
  margin-bottom: 12px;
  background: #faf7ff;
}
.parent-usage-title {
  font-size: 0.82rem;
  font-weight: 800;
  margin-bottom: 8px;
  color: #4d3a7b;
}
.parent-usage-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.76rem;
  color: #6f5f98;
  padding: 3px 0;
}
.parent-usage-row strong {
  color: #402a76;
}

.parent-settings {
  border: 1px solid rgba(255, 159, 214, 0.28);
  border-radius: 12px;
  padding: 10px;
  margin-bottom: 12px;
  background: #fff8ff;
}
.parent-settings h4 {
  font-size: 0.84rem;
  margin-bottom: 8px;
}
.parent-setting-row {
  margin-bottom: 8px;
}
.parent-setting-label {
  display: block;
  font-size: 0.72rem;
  color: var(--text-light);
  margin-bottom: 4px;
}
.parent-setting-control {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}
.parent-setting-control input[type='range'] {
  width: 100%;
}
.parent-setting-value {
  font-size: 0.72rem;
  font-weight: 700;
  min-width: 68px;
  text-align: right;
}
.parent-toggle-row {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.76rem;
  margin: 10px 0;
}
.parent-settings-actions {
  display: flex;
  gap: 8px;
}
.parent-time-lock-row {
  display: grid;
  grid-template-columns: auto 1fr auto 1fr;
  gap: 8px;
  align-items: center;
}
.parent-toggle-inline {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 0.72rem;
  color: var(--text-light);
}
.parent-time-input {
  width: 100%;
  border: 1px solid #e0d5ff;
  border-radius: 8px;
  padding: 6px 8px;
  font-size: 0.78rem;
  font-family: inherit;
  background: #fff;
  color: var(--text);
}

.kid-guard-overlay {
  position: fixed;
  inset: 0;
  background: rgba(30, 20, 55, 0.55);
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
}
.kid-guard-card {
  width: min(420px, 100%);
  border-radius: 18px;
  background: #ffffff;
  border: 2px solid rgba(166,108,255,0.25);
  box-shadow: 0 18px 36px rgba(20, 12, 40, 0.3);
  padding: 18px 16px;
  text-align: center;
}
.kid-guard-card h3 {
  font-size: 1.05rem;
  color: #4f3474;
  margin-bottom: 8px;
}
.kid-guard-card p {
  font-size: 0.85rem;
  color: #6f5f98;
  line-height: 1.4;
}
.kid-guard-buttons {
  margin-top: 12px;
  display: grid;
  gap: 8px;
}

/* ==========================================
   RESULT SCREEN
   ========================================== */
.result-container {
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  min-height: 100%; padding: 24px; text-align: center;
  background: var(--bg);
}
.result-stars { font-size: 1.8rem; margin-bottom: 16px; animation: float 2s ease-in-out infinite; }
.result-message { font-size: 1.8rem; margin-bottom: 10px; color: var(--primary); }
.result-score { font-size: 2.5rem; font-weight: 800; color: var(--text); margin-bottom: 28px; }
.result-meta {
  font-size: 1rem;
  font-weight: 700;
  color: var(--text-soft);
  margin: 0 0 8px;
}
.result-buttons {
  display: flex; flex-direction: column; gap: 10px;
  width: 100%; max-width: 260px;
}

/* ==========================================
   BUTTONS
   ========================================== */
.btn-primary {
  background: linear-gradient(135deg, var(--primary) 0%, #8a7dff 48%, #62c8ff 100%);
  color: white; border: none;
  border-radius: 50px; padding: 12px 24px;
  font-size: 1rem; font-weight: 700; font-family: inherit;
  cursor: pointer; box-shadow: 0 8px 18px rgba(166, 108, 255, 0.28);
  transition: all 0.2s;
  min-height: var(--touch-target);
}
.btn-primary:active { transform: scale(0.95); }

.btn-secondary {
  background: white; color: var(--text);
  border: 2px solid var(--primary-light);
  border-radius: 50px; padding: 10px 20px;
  font-size: 0.95rem; font-weight: 600; font-family: inherit;
  cursor: pointer; transition: all 0.2s;
  min-height: var(--touch-target);
}
.btn-secondary:active { background: var(--primary-light); }

/* ==========================================
   POPUPS
   ========================================== */
.popup-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.4);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000; animation: fadeIn 0.3s ease;
}

.popup-content {
  background: white; border-radius: 24px;
  padding: 28px 20px; text-align: center;
  max-width: 300px; width: 90%;
  box-shadow: 0 20px 60px rgba(0,0,0,0.2);
  animation: popIn 0.4s ease;
}

@keyframes popIn {
  from { transform: scale(0.5); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.popup-sticker, .popup-badge { font-size: 4rem; margin-bottom: 10px; }
.popup-badge-name { font-size: 1.2rem; font-weight: 700; color: var(--primary); margin-bottom: 4px; }
.popup-text { font-size: 1rem; color: var(--text); margin-bottom: 16px; }

/* Level-up popup */
.levelup-popup { background: linear-gradient(135deg, #FFF9E0, #FFE082); }
.levelup-sparkles { font-size: 2rem; margin-bottom: 8px; animation: sparkle 1s infinite; }
.levelup-icon { font-size: 4rem; margin-bottom: 8px; animation: float 1s ease-in-out infinite; }
.levelup-title { font-size: 1.5rem; font-weight: 800; color: #FF6F00; margin-bottom: 4px; }
.levelup-level { font-size: 2rem; font-weight: 800; color: var(--text); }
.levelup-name { font-size: 1rem; color: var(--text-light); margin-bottom: 16px; }

/* Stamp popup */
.stamp-popup { background: linear-gradient(135deg, #E3F2FD, #BBDEFB); }
.stamp-icon { font-size: 3.5rem; margin-bottom: 8px; }
.stamp-title { font-size: 1.3rem; font-weight: 800; color: #1565C0; margin-bottom: 4px; }
.stamp-text { font-size: 1rem; color: var(--text); margin-bottom: 8px; }
.stamp-bonus { font-size: 0.9rem; font-weight: 700; color: #E65100; margin-bottom: 8px; }
.stamp-streak { font-size: 1.1rem; font-weight: 700; margin-bottom: 16px; }

/* ==========================================
   FLOATING STAR
   ========================================== */
.floating-star {
  position: fixed; font-size: 1.8rem; bottom: 30%;
  z-index: 999; pointer-events: none;
  animation: floatUp 1s ease-out forwards;
}
@keyframes floatUp {
  from { opacity: 1; transform: translateY(0) scale(1); }
  to { opacity: 0; transform: translateY(-150px) scale(1.5); }
}

/* ==========================================
   PROGRESS BAR (generic)
   ========================================== */
.progress-bar {
  height: 8px; background: #F0E0F0;
  border-radius: 4px; overflow: hidden; margin-bottom: 4px;
}
.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-light), var(--primary));
  border-radius: 4px; transition: width 0.5s ease;
}
.progress-text { font-size: 0.7rem; color: var(--text-light); }

/* ==========================================
   RESPONSIVE
   ========================================== */
@media (min-width: 480px) {
  .learn-card { max-width: 380px; }
  .matching-grid { max-width: 500px; margin-left: auto; margin-right: auto; }
  .coloring-designs-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
    max-width: 720px;
    margin-left: auto;
    margin-right: auto;
  }
}

@media (min-width: 768px) {
  .profile-card { padding: 36px 32px; }
  .profile-avatar { font-size: 60px; }
  .splash-fairy { font-size: 100px; }
  .splash-title { font-size: 3rem; }
  .train-car { width: 130px; }
  .coloring-designs-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); }
  .coloring-canvas-stack { width: min(100%, 1120px); }
}

/* Safe area for notched phones */
@supports (padding: env(safe-area-inset-top)) {
  .app-header { padding-top: env(safe-area-inset-top); height: calc(var(--header-height) + env(safe-area-inset-top)); }
  .screen { top: calc(var(--header-height) + env(safe-area-inset-top)); }
  #screen-splash, #screen-profile { top: 0; }
  .tab-bar { height: calc(var(--tab-height) + env(safe-area-inset-bottom)); }
}

/* Sparkle background for home */
.home-container::before {
  content: ''; position: absolute; top: 0; left: 0;
  width: 100%; height: 100%; pointer-events: none;
  background-image:
    radial-gradient(2px 2px at 20% 30%, var(--primary-light) 50%, transparent 50%),
    radial-gradient(2px 2px at 40% 70%, var(--gold) 50%, transparent 50%),
    radial-gradient(2px 2px at 60% 20%, var(--purple) 50%, transparent 50%),
    radial-gradient(2px 2px at 80% 60%, var(--pink) 50%, transparent 50%);
  opacity: 0.2; z-index: 0;
}

@media (prefers-reduced-motion: reduce), (max-width: 480px) {
  .sparkle,
  .splash-fairy,
  .hint-glow {
    animation: none !important;
  }

  * {
    transition-duration: 0.01ms !important;
  }

  .dump-topbar {
    backdrop-filter: none;
  }
}
.home-container > * { position: relative; z-index: 1; }

/* ==========================================
   DUMP MIGRATION HUB
   ========================================== */
#screen-reference {
  background: linear-gradient(180deg, #f7fbfd 0%, #eef7fb 100%);
}

.dump-shell {
  min-height: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.dump-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 14px 12px;
  position: sticky;
  top: 0;
  background: rgba(255, 255, 255, 0.94);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(77, 182, 172, 0.2);
  z-index: 10;
}

.dump-title {
  font-size: 0.95rem;
  font-weight: 800;
  color: #1f4756;
}

.dump-topbar-actions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.dump-btn {
  border: 0;
  border-radius: 999px;
  background: #d6eef3;
  color: #1f4756;
  font-family: inherit;
  font-size: 0.78rem;
  font-weight: 700;
  padding: 8px 12px;
  cursor: pointer;
}

.dump-btn:active {
  transform: scale(0.96);
}

.dump-btn-primary {
  background: linear-gradient(135deg, #4db6ac, #009688);
  color: #fff;
}

.dump-loading,
.dump-error {
  margin: auto 16px;
  text-align: center;
  background: #fff;
  border-radius: 16px;
  padding: 18px 14px;
  box-shadow: 0 8px 24px rgba(13, 71, 92, 0.12);
}

.dump-hub-grid {
  padding: 14px 12px 20px;
  display: grid;
  gap: 12px;
}

.dump-card {
  text-align: left;
  border: 0;
  border-radius: 16px;
  padding: 14px;
  background: #fff;
  box-shadow: 0 6px 20px rgba(8, 73, 102, 0.14);
  cursor: pointer;
}

.dump-card:active {
  transform: scale(0.98);
}

.dump-card-main {
  background: linear-gradient(140deg, #4db6ac, #26a69a);
  color: #fff;
}

.dump-card-badge {
  display: inline-block;
  font-size: 0.66rem;
  font-weight: 800;
  letter-spacing: 0.08em;
  background: rgba(255, 255, 255, 0.24);
  border-radius: 999px;
  padding: 3px 8px;
}

.dump-card-title {
  margin-top: 8px;
  font-size: 1rem;
  font-weight: 800;
}

.dump-card-desc {
  margin-top: 6px;
  font-size: 0.82rem;
  line-height: 1.35;
  opacity: 0.9;
}

.dump-shell-frame {
  min-height: 100%;
  height: 100%;
}

.dump-frame-wrap {
  flex: 1;
  min-height: 0;
  background: #10262f;
  margin: 8px 12px 12px;
  border-radius: 12px;
  overflow: hidden;
}

.dump-frame {
  width: 100%;
  height: 100%;
  min-height: 420px;
  border: 0;
  background: #fff;
}

.dump-pack-grid {
  padding: 12px;
  display: grid;
  gap: 12px;
}

.dump-pack-card {
  background: #fff;
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 6px 20px rgba(8, 73, 102, 0.12);
  display: grid;
  gap: 10px;
}

.dump-pack-head {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: baseline;
}

.dump-pack-head strong {
  font-size: 0.95rem;
  color: #234a59;
}

.dump-pack-head span,
.dump-pack-meta {
  font-size: 0.75rem;
  color: #5d7b87;
}

.dump-pack-thumb {
  width: 100%;
  border-radius: 10px;
  border: 1px solid #d9eaf0;
  max-height: 180px;
  object-fit: cover;
  background: #f8fcff;
}

.dump-pack-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 120px;
}

.dump-pack-audio audio {
  width: 100%;
}

.dump-pack-links a {
  font-size: 0.78rem;
  color: #007e9d;
  text-decoration: none;
  font-weight: 700;
}

.dump-pack-detail {
  padding: 12px;
  display: grid;
  gap: 12px;
}

.dump-section {
  background: #fff;
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 6px 20px rgba(8, 73, 102, 0.1);
}

.dump-section h3 {
  margin-bottom: 10px;
  color: #234a59;
  font-size: 0.95rem;
}

.dump-image-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.dump-image-card {
  margin: 0;
  border-radius: 10px;
  overflow: hidden;
  border: 1px solid #e0edf2;
  background: #fff;
}

.dump-image-card img {
  width: 100%;
  display: block;
  aspect-ratio: 1/1;
  object-fit: cover;
}

.dump-image-card figcaption {
  padding: 4px 6px;
  font-size: 0.7rem;
  color: #577380;
  text-align: center;
}

.dump-audio-row,
.dump-file-row {
  display: grid;
  gap: 6px;
  border: 1px solid #e1eef3;
  border-radius: 10px;
  padding: 8px;
  margin-bottom: 8px;
}

.dump-audio-row span,
.dump-file-row span {
  font-size: 0.78rem;
  color: #486771;
  word-break: break-all;
}

.dump-file-row a {
  font-size: 0.78rem;
  color: #007e9d;
  font-weight: 700;
  text-decoration: none;
}

.dump-file-row audio {
  width: 100%;
}

.dump-chip-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.dump-chip {
  border: 1px solid #cfe7ef;
  background: #f4fbfe;
  color: #2f5a69;
  border-radius: 999px;
  padding: 6px 10px;
  font: inherit;
  font-size: 0.75rem;
  font-weight: 700;
  cursor: pointer;
}

.dump-chip.active {
  background: linear-gradient(135deg, #4db6ac, #009688);
  border-color: transparent;
  color: #fff;
}

.dump-file-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.dump-file-actions a {
  font-size: 0.78rem;
  color: #007e9d;
  font-weight: 700;
  text-decoration: none;
}

.dump-note {
  margin-top: 8px;
}

.dump-player-mount {
  width: 100%;
  height: 100%;
  min-height: 420px;
  background: #0f1f28;
}

.dump-verify-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
  margin-bottom: 10px;
}

.dump-kv {
  border: 1px solid #d7eaf1;
  border-radius: 10px;
  padding: 8px;
  background: #f9fcfe;
  display: grid;
  gap: 3px;
}

.dump-kv span {
  font-size: 0.7rem;
  color: #4f7080;
}

.dump-kv strong {
  font-size: 0.92rem;
  color: #1d4757;
}

.dump-warn-list {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 4px;
}

.dump-warn-list li {
  font-size: 0.76rem;
  color: #7d3a3a;
  word-break: break-all;
}

.dump-cli-box {
  text-align: left;
  white-space: pre-wrap;
  background: #13232b;
  color: #d7ecf2;
  border-radius: 10px;
  padding: 10px;
  margin: 10px 0;
  font-size: 0.72rem;
  font-family: Consolas, Monaco, 'Courier New', monospace;
}

/* ==========================================
   KIDS APP LAB (Benchmark)
   ========================================== */
#screen-benchmark {
  top: 0;
  bottom: 0;
  background: linear-gradient(180deg, #f7f3ff 0%, #f1f8ff 100%);
}

.benchmark-shell {
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  gap: 14px;
  padding-bottom: 18px;
}

.benchmark-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 14px 12px;
  position: sticky;
  top: 0;
  z-index: 12;
  background: rgba(255, 255, 255, 0.94);
  border-bottom: 1px solid rgba(126, 87, 194, 0.2);
  backdrop-filter: blur(6px);
}

.benchmark-title {
  font-size: 0.98rem;
  font-weight: 800;
  color: #442f68;
}

.benchmark-btn {
  border: 0;
  border-radius: 999px;
  background: #e8ddff;
  color: #442f68;
  font-family: inherit;
  font-size: 0.78rem;
  font-weight: 700;
  padding: 8px 12px;
  cursor: pointer;
}

.benchmark-btn:active {
  transform: scale(0.97);
}

.benchmark-btn-primary {
  background: linear-gradient(135deg, #7e57c2, #5e35b1);
  color: #fff;
}

.benchmark-hero {
  margin: 0 12px;
  padding: 16px;
  border-radius: 18px;
  background: linear-gradient(135deg, #7e57c2 0%, #5c6bc0 100%);
  color: #fff;
  box-shadow: 0 8px 28px rgba(66, 51, 120, 0.28);
}

.benchmark-hero-kicker {
  display: inline-block;
  font-size: 0.7rem;
  font-weight: 800;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  background: rgba(255, 255, 255, 0.2);
  padding: 4px 8px;
  border-radius: 999px;
  margin-bottom: 10px;
}

.benchmark-hero h2 {
  font-size: 1.18rem;
  line-height: 1.35;
  margin-bottom: 8px;
}

.benchmark-hero p {
  font-size: 0.84rem;
  opacity: 0.95;
  line-height: 1.4;
}

.benchmark-filters {
  margin: 0 12px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(56, 68, 106, 0.12);
  padding: 12px;
  display: grid;
  gap: 10px;
}

.benchmark-filter-group {
  display: grid;
  gap: 6px;
}

.benchmark-filter-label {
  font-size: 0.75rem;
  font-weight: 700;
  color: #5e5c86;
}

.benchmark-auto-chip {
  display: inline-block;
  margin-left: 6px;
  padding: 2px 7px;
  border-radius: 999px;
  background: #ede6ff;
  color: #5b3fa8;
  font-size: 0.68rem;
  font-weight: 800;
}

.benchmark-chip-row {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.benchmark-chip {
  border: 1px solid #d7c8ff;
  border-radius: 999px;
  background: #faf7ff;
  color: #5c4b84;
  padding: 6px 10px;
  font-size: 0.75rem;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
}

.benchmark-chip.active {
  border-color: #6a44bd;
  background: #6a44bd;
  color: #fff;
}

.benchmark-results {
  margin: 0 12px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(56, 68, 106, 0.12);
  padding: 12px;
}

.benchmark-results-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 10px;
}

.benchmark-results-head strong {
  font-size: 0.86rem;
  color: #463a68;
}

.benchmark-results-main {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.benchmark-check-count {
  font-size: 0.7rem;
  color: #6b5f94;
  background: #f3ecff;
  border-radius: 999px;
  padding: 4px 8px;
  font-weight: 700;
}

.benchmark-head-actions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.benchmark-app-grid {
  display: grid;
  gap: 10px;
}

.benchmark-app-card {
  border: 1px solid #ece4ff;
  border-radius: 14px;
  padding: 12px;
  display: grid;
  gap: 8px;
  background: #fcfbff;
}

.benchmark-app-head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
}

.benchmark-app-head h4 {
  font-size: 0.95rem;
  color: #2f325b;
}

.benchmark-price-tag {
  font-size: 0.7rem;
  font-weight: 800;
  color: #fff;
  background: #5e35b1;
  padding: 4px 8px;
  border-radius: 999px;
  white-space: nowrap;
}

.benchmark-meta {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.benchmark-meta span {
  font-size: 0.72rem;
  color: #5f6087;
  background: #f3eeff;
  border-radius: 999px;
  padding: 4px 8px;
}

.benchmark-summary {
  font-size: 0.79rem;
  line-height: 1.4;
  color: #4b4b6d;
}

.benchmark-card-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.benchmark-check-btn {
  background: #ece4ff;
  color: #4d3a7c;
}

.benchmark-check-btn.active {
  background: #2e9d6f;
  color: #fff;
}

.benchmark-empty {
  border-radius: 12px;
  padding: 16px;
  background: #f7f2ff;
  color: #4f3f7a;
  text-align: center;
}

.benchmark-empty h4 {
  font-size: 0.92rem;
  margin-bottom: 6px;
}

.benchmark-empty p {
  font-size: 0.78rem;
}

.benchmark-blueprint,
.benchmark-policy {
  margin: 0 12px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(56, 68, 106, 0.12);
  padding: 12px;
}

.benchmark-blueprint h3,
.benchmark-policy h3 {
  font-size: 0.9rem;
  color: #3c3161;
  margin-bottom: 10px;
}

.benchmark-blueprint-grid {
  display: grid;
  gap: 8px;
}

.benchmark-note-card {
  border: 1px solid #e8e0ff;
  border-radius: 12px;
  padding: 10px;
  background: #faf8ff;
}

.benchmark-note-card h4 {
  font-size: 0.8rem;
  color: #4b3a78;
  margin-bottom: 4px;
}

.benchmark-note-card p {
  font-size: 0.76rem;
  line-height: 1.35;
  color: #565675;
}

.benchmark-link-list {
  display: grid;
  gap: 8px;
}

.benchmark-link-item {
  display: block;
  border-radius: 10px;
  background: #f5f1ff;
  color: #4f3d7a;
  text-decoration: none;
  font-size: 0.76rem;
  font-weight: 700;
  padding: 10px;
}

.benchmark-link-item:active {
  transform: scale(0.98);
}

/* ==========================================
   UNICORN BOOST THEME
   ========================================== */
:root {
  --font: 'Segoe Print', 'Trebuchet MS', 'Segoe UI', sans-serif;
  --unicorn-rainbow: linear-gradient(120deg, #ff77cc 0%, #bf90ff 23%, #7cd9ff 46%, #89f4d7 68%, #ffe688 84%, #ff9dc3 100%);
  --unicorn-soft: linear-gradient(145deg, rgba(255,255,255,0.97) 0%, rgba(255,244,255,0.93) 48%, rgba(240,251,255,0.93) 100%);
  --unicorn-border: rgba(255, 122, 204, 0.34);
}

body {
  position: relative;
  background:
    radial-gradient(1100px 420px at -8% -14%, rgba(255,122,204,0.45), transparent 58%),
    radial-gradient(900px 360px at 108% -12%, rgba(124,217,255,0.52), transparent 56%),
    radial-gradient(760px 320px at 50% 112%, rgba(137,244,215,0.46), transparent 60%),
    linear-gradient(180deg, #fffaff 0%, #fff5fd 45%, #fef9ff 100%);
}

body::before,
body::after {
  content: '';
  position: fixed;
  pointer-events: none;
  z-index: -1;
}

body::before {
  inset: -10% -20%;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.3) 0 6px, transparent 7px),
    radial-gradient(circle at 70% 15%, rgba(255,255,255,0.28) 0 5px, transparent 6px),
    radial-gradient(circle at 35% 80%, rgba(255,255,255,0.28) 0 5px, transparent 6px),
    radial-gradient(circle at 82% 74%, rgba(255,255,255,0.26) 0 4px, transparent 5px);
  background-size: 260px 260px, 210px 210px, 240px 240px, 300px 300px;
  animation: unicornSparkleFloat 20s linear infinite alternate;
}

body::after {
  inset: 0;
  background:
    radial-gradient(circle at 10% 20%, rgba(255,180,225,0.22) 0 24%, transparent 28%),
    radial-gradient(circle at 85% 25%, rgba(173,231,255,0.2) 0 22%, transparent 30%),
    radial-gradient(circle at 48% 95%, rgba(181,255,231,0.2) 0 23%, transparent 32%);
}

@keyframes unicornSparkleFloat {
  from { transform: translate3d(-1%, 0, 0); }
  to { transform: translate3d(1%, -2%, 0); }
}

.app-header,
.tab-bar {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background:
    linear-gradient(130deg, rgba(255,255,255,0.88), rgba(255,244,255,0.8) 40%, rgba(239,249,255,0.82) 100%);
}

.tab-btn.active {
  background: rgba(255, 158, 213, 0.2);
  border-radius: 12px;
}

.home-container,
.category-detail-container,
.learn-container,
.game-select-container,
.quiz-container,
.sound-container,
.matching-container,
.combine-container,
.coloring-select-container,
.coloring-container,
.reward-container,
.attendance-container,
.result-container {
  background: transparent;
}

.today-card,
.quick-play-card,
.train-car,
.stage-card,
.game-mode-card,
.learn-card,
.quiz-choice,
.counting-choice,
.combine-result-area,
.combine-btn,
.coloring-design-card,
.coloring-svg,
.coloring-toolbar,
.gallery-item,
.reward-section,
.mission-card,
.parent-profile-section,
.benchmark-results,
.benchmark-blueprint,
.benchmark-policy,
.benchmark-app-card,
.benchmark-note-card {
  background: var(--unicorn-soft);
  border: 1px solid var(--unicorn-border);
  box-shadow: 0 10px 24px rgba(187, 115, 255, 0.18);
}

.today-card:nth-child(3n+1) { --card-accent: #ff71c8; }
.today-card:nth-child(3n+2) { --card-accent: #8ed9ff; }
.today-card:nth-child(3n+3) { --card-accent: #9af1d9; }

.quick-play-card:nth-child(4n+1) { border-color: #ff89cb; }
.quick-play-card:nth-child(4n+2) { border-color: #c199ff; }
.quick-play-card:nth-child(4n+3) { border-color: #7cd7ff; }
.quick-play-card:nth-child(4n+4) { border-color: #8cefd0; }

.train-roof {
  background: var(--unicorn-rainbow);
}

.btn-primary,
.btn-sound,
.stage-game-btn,
.dump-btn-primary,
.benchmark-btn-primary {
  background: var(--unicorn-rainbow) !important;
  background-size: 220% 220% !important;
  color: #fff !important;
  border: none !important;
  box-shadow: 0 12px 28px rgba(182, 104, 255, 0.3);
  animation: unicornGradientShift 8s ease infinite;
}

.btn-primary:active,
.btn-sound:active,
.stage-game-btn:active,
.dump-btn-primary:active,
.benchmark-btn-primary:active {
  transform: scale(0.96);
}

@keyframes unicornGradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.quiz-progress-bar,
.mission-progress-fill,
.level-xp-fill {
  background: var(--unicorn-rainbow);
  background-size: 220% 220%;
}

.mission-card {
  border-color: rgba(255, 149, 215, 0.38);
}

.mission-card.done {
  background: linear-gradient(140deg, rgba(237,255,246,0.96), rgba(228,250,255,0.96));
  border-color: rgba(91, 214, 157, 0.42);
}

.coloring-design-card,
.gallery-item {
  position: relative;
  overflow: hidden;
}

.coloring-design-card::after,
.gallery-item::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.4) 48%, transparent 100%);
  pointer-events: none;
}

.design-preview-img,
.gallery-mini-thumb {
  filter: drop-shadow(0 6px 12px rgba(173, 118, 255, 0.26)) saturate(1.08);
}

@media (max-width: 420px) {
  .btn-primary,
  .stage-game-btn {
    font-size: 0.95rem;
    padding: 11px 18px;
  }
  .quick-play-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
  }
  .counting-choice {
    width: 52px;
    height: 52px;
    min-width: 52px;
    font-size: 1.3rem;
  }
  .parent-time-lock-row {
    grid-template-columns: 1fr;
  }
  .parent-toggle-inline {
    justify-content: flex-start;
  }
}

/* ==========================================
   DRAWING STUDIO EXTENSIONS
   ========================================== */
.coloring-pro-banner {
  margin: 8px 0 10px;
  border-radius: 12px;
  padding: 8px 10px;
  background: linear-gradient(120deg, rgba(255, 122, 204, 0.2), rgba(128, 210, 255, 0.2));
  color: #5a3f76;
  font-size: 0.78rem;
  font-weight: 700;
  text-align: center;
}

.pro-toolbar {
  display: grid;
  gap: 8px;
}

.tool-title {
  font-size: 0.76rem;
  font-weight: 800;
  color: #5c4479;
}

.tool-chip-row {
  display: flex;
  align-items: center;
  gap: 8px;
  overflow-x: auto;
  padding: 2px 0 4px;
  scrollbar-width: thin;
}

.tool-chip-row::-webkit-scrollbar {
  height: 6px;
}

.brush-size-row {
  gap: 10px;
}

.brush-size-row input[type='range'] {
  width: min(320px, 100%);
}

.brush-size-value {
  font-size: 0.76rem;
  font-weight: 700;
  color: #5a3f72;
  min-width: 48px;
  text-align: right;
}

.shape-options {
  display: flex;
  align-items: center;
  gap: 8px;
}

.fill-sensitivity-row {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.sticker-category-row {
  display: flex;
  gap: 6px;
  overflow-x: auto;
  padding-bottom: 2px;
}

.sticker-cat-btn {
  border: 2px solid var(--primary-light);
  background: white;
  color: var(--text);
  border-radius: 999px;
  padding: 4px 10px;
  font-size: 0.72rem;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
}

.sticker-cat-btn.active {
  border-color: var(--primary);
  background: var(--primary);
  color: #fff;
}

.coloring-svg-pro {
  padding: 0;
}

.coloring-draw-canvas {
  touch-action: none;
}

.gallery-drawing-thumb {
  width: 46px;
  height: 46px;
  object-fit: cover;
  border-radius: 8px;
  display: block;
  margin: 0 auto;
}

.save-toast {
  position: fixed;
  left: 50%;
  bottom: 96px;
  transform: translateX(-50%) translateY(20px);
  background: rgba(52, 39, 84, 0.92);
  color: #fff;
  font-size: 0.78rem;
  font-weight: 700;
  border-radius: 999px;
  padding: 8px 14px;
  z-index: 1200;
  opacity: 0;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.save-toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* ==========================================
   GITHUB MINI GAME PACK
   ========================================== */
.github-pack-intro {
  margin: 10px 0 14px;
  padding: 12px 14px;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(244, 251, 255, 0.86));
  border: 1px solid var(--unicorn-border);
  font-size: 0.85rem;
  color: var(--text-light);
}

.github-pack-grid {
  display: grid;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: 10px;
}

.github-pack-card {
  border: 1px solid var(--unicorn-border);
  border-radius: 14px;
  background: var(--unicorn-soft);
  text-align: left;
  padding: 12px;
  box-shadow: 0 8px 20px rgba(183, 113, 255, 0.18);
  cursor: pointer;
  color: var(--text);
  font-family: inherit;
  transition: transform 0.18s ease, box-shadow 0.18s ease;
}

.github-pack-card:hover {
  transform: translateY(-2px) scale(1.01);
  box-shadow: 0 14px 26px rgba(123, 76, 170, 0.22);
}

.github-pack-card h3 {
  margin: 6px 0 4px;
  font-size: 1rem;
  display: flex;
  align-items: center;
  gap: 6px;
}

.github-pack-mascot {
  width: 26px;
  height: 26px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.86);
  border: 1px solid rgba(172, 147, 216, 0.34);
  font-size: 0.95rem;
}

.github-pack-card p {
  margin: 0;
  font-size: 0.78rem;
  color: var(--text-light);
}

.github-pack-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.github-pack-badge {
  background: var(--primary-light);
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 0.72rem;
  font-weight: 700;
  color: var(--text);
}

.github-pack-source {
  font-size: 0.68rem;
  color: var(--text-light);
}

.github-pack-toolbar {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  margin: 8px 0 6px;
}

.github-pack-search {
  border: 2px solid var(--primary-light);
  border-radius: 999px;
  padding: 9px 12px;
  font-family: inherit;
  font-size: 0.88rem;
  color: var(--text);
  background: #fff;
}

.github-pack-meta {
  margin: 0 0 8px;
  color: var(--text-light);
  font-size: 0.78rem;
}

.github-pack-card.generated {
  border-style: dashed;
}

.github-link-card {
  border: 1px solid var(--unicorn-border);
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.9);
  padding: 10px 12px;
  display: grid;
  gap: 6px;
}

.github-link-card code {
  display: block;
  font-size: 0.74rem;
  color: #455a64;
  word-break: break-all;
}

.gp-shell {
  gap: 12px;
  border-radius: 18px;
  border: 1px solid rgba(255, 255, 255, 0.72);
  background: linear-gradient(140deg, rgba(255, 255, 255, 0.86), rgba(247, 245, 255, 0.86) 55%, rgba(241, 250, 255, 0.9));
  box-shadow: 0 16px 28px rgba(125, 100, 180, 0.2);
  position: relative;
  overflow: hidden;
}

.gp-shell::before {
  content: '';
  position: absolute;
  inset: -22% auto auto -16%;
  width: 160px;
  height: 160px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 150, 220, 0.38), transparent 65%);
  pointer-events: none;
}

.gp-shell::after {
  content: '';
  position: absolute;
  inset: auto -10% -36% auto;
  width: 200px;
  height: 180px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(140, 205, 255, 0.35), transparent 68%);
  pointer-events: none;
}

.gp-subtitle,
.gp-note,
.gp-finish-note {
  text-align: center;
  color: var(--text-light);
  font-size: 0.82rem;
}

.gp-question-box {
  min-height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  border-radius: 14px;
  border: 1px solid var(--unicorn-border);
  background: rgba(255, 255, 255, 0.78);
  font-weight: 800;
  font-size: 1.35rem;
  color: var(--text);
  padding: 10px;
}

.gp-mascot-banner {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 10px;
  align-items: center;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.7);
  padding: 8px 10px;
  margin: 8px 0 4px;
}

.gp-mascot-icon {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
}

.gp-mascot-copy {
  display: grid;
  gap: 2px;
}

.gp-mascot-copy strong {
  font-size: 0.84rem;
  color: #2f2d4a;
}

.gp-mascot-copy span {
  font-size: 0.76rem;
  color: #595679;
}

.gp-theme-spark .gp-mascot-banner {
  background: linear-gradient(135deg, rgba(255, 201, 242, 0.52), rgba(184, 228, 255, 0.45));
}

.gp-theme-rainbow .gp-mascot-banner {
  background: linear-gradient(135deg, rgba(255, 184, 226, 0.45), rgba(255, 240, 170, 0.45), rgba(173, 238, 255, 0.45));
}

.gp-theme-sunset .gp-mascot-banner {
  background: linear-gradient(135deg, rgba(255, 193, 155, 0.48), rgba(255, 223, 178, 0.4), rgba(255, 178, 209, 0.38));
}

.gp-theme-mint .gp-mascot-banner {
  background: linear-gradient(135deg, rgba(173, 255, 226, 0.44), rgba(228, 255, 247, 0.5), rgba(193, 252, 236, 0.4));
}

.gp-theme-ocean .gp-mascot-banner {
  background: linear-gradient(135deg, rgba(176, 224, 255, 0.52), rgba(202, 247, 255, 0.44), rgba(173, 212, 255, 0.42));
}

.gp-theme-candy .gp-mascot-banner {
  background: linear-gradient(135deg, rgba(255, 208, 238, 0.55), rgba(231, 211, 255, 0.44), rgba(255, 240, 214, 0.42));
}

.gp-hud {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.gp-hud-pill {
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.84);
  background: rgba(255, 255, 255, 0.8);
  padding: 6px 8px;
  display: grid;
  gap: 2px;
}

.gp-hud-pill strong {
  font-size: 0.65rem;
  letter-spacing: 0.04em;
  color: #6c6b8a;
}

.gp-hud-pill span {
  font-size: 0.86rem;
  font-weight: 800;
  color: #39375a;
  line-height: 1.2;
}

.gp-power-row {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.gp-power-row .btn-secondary {
  border-radius: 12px;
}

.gp-hidden-choice {
  opacity: 0.28;
  filter: grayscale(0.7);
}

.gp-shell .quiz-choice {
  border: 2px solid rgba(180, 136, 255, 0.46);
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(246, 244, 255, 0.9));
  box-shadow: 0 8px 16px rgba(158, 137, 194, 0.18);
  transition: transform 0.14s ease, box-shadow 0.14s ease;
}

.gp-shell .quiz-choice:not(:disabled):hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 18px rgba(134, 111, 179, 0.22);
}

/* Generated premium modes */
.tap-rush-board {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

.tap-rush-cell {
  min-height: 76px;
  border-radius: 16px;
  border: 2px solid rgba(164, 144, 216, 0.4);
  background: linear-gradient(145deg, #ffffff, #f6f1ff 54%, #eef9ff);
  font-size: 1.8rem;
  box-shadow: 0 10px 16px rgba(125, 109, 171, 0.15);
  transition: transform 0.12s ease, box-shadow 0.12s ease;
}

.tap-rush-cell.active {
  transform: scale(1.03);
  border-color: rgba(255, 124, 192, 0.72);
  box-shadow: 0 0 0 4px rgba(255, 174, 219, 0.34), 0 14px 22px rgba(169, 107, 160, 0.25);
  background: linear-gradient(145deg, #fff8ff, #ffe7f5 52%, #fbe9ff);
}

.tap-rush-cell:active {
  transform: scale(0.97);
}

.grid-hunt-board {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 8px;
}

.grid-hunt-cell {
  min-height: 64px;
  border-radius: 12px;
  border: 2px solid rgba(144, 193, 255, 0.44);
  background: linear-gradient(150deg, #ffffff, #f1f9ff 55%, #ecf4ff);
  font-size: 1.55rem;
  transition: transform 0.12s ease, opacity 0.12s ease;
}

.grid-hunt-cell.cleared {
  opacity: 0.72;
  border-color: rgba(126, 217, 176, 0.7);
  background: linear-gradient(150deg, #f0fff5, #e7fff2);
}

.grid-hunt-cell:active {
  transform: scale(0.96);
}

.rhythm-stage {
  border-radius: 18px;
  border: 2px solid rgba(163, 137, 227, 0.42);
  padding: 16px;
  background: linear-gradient(160deg, rgba(255, 255, 255, 0.9), rgba(241, 246, 255, 0.88));
  display: grid;
  justify-items: center;
  gap: 12px;
}

.rhythm-ring {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  border: 4px dashed rgba(173, 144, 235, 0.58);
  background: radial-gradient(circle, rgba(255, 222, 245, 0.65), rgba(224, 239, 255, 0.48));
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.rhythm-stage.pulse .rhythm-ring {
  transform: scale(1.08);
  box-shadow: 0 0 0 10px rgba(251, 192, 255, 0.2);
}

.rhythm-hit-btn {
  min-width: 150px;
  border-radius: 999px;
  border: 2px solid rgba(166, 130, 232, 0.6);
  background: linear-gradient(145deg, #ffffff, #f5efff);
  color: #4b3d78;
  font-weight: 800;
  letter-spacing: 0.04em;
  padding: 12px 18px;
}

.rhythm-hit-btn.ready {
  border-color: rgba(255, 112, 181, 0.85);
  background: linear-gradient(145deg, #fff8ff, #ffdff1);
  box-shadow: 0 0 0 6px rgba(255, 181, 222, 0.32);
}

.gp-emoji-focus {
  text-align: center;
  font-size: 74px;
  line-height: 1;
  margin: 2px 0 6px;
}

.gp-truefalse {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

/* Spellie */
.spellie-board {
  display: grid;
  gap: 8px;
  justify-content: center;
}

.spellie-row {
  display: grid;
  grid-template-columns: repeat(5, 46px);
  gap: 6px;
}

.spellie-tile {
  width: 46px;
  height: 46px;
  border-radius: 10px;
  border: 2px solid var(--primary-light);
  background: rgba(255, 255, 255, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1rem;
  text-transform: uppercase;
}

.spellie-tile.correct {
  background: #c8e6c9;
  border-color: #4caf50;
}

.spellie-tile.present {
  background: #fff3c4;
  border-color: #f9a825;
}

.spellie-tile.absent {
  background: #eceff1;
  border-color: #b0bec5;
}

.spellie-input-row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
}

.spellie-input {
  border: 2px solid var(--primary-light);
  border-radius: 999px;
  padding: 10px 14px;
  font-family: inherit;
  font-weight: 700;
  text-transform: uppercase;
}

/* Simon */
.simon-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

.simon-pad {
  border: 0;
  border-radius: 16px;
  min-height: 92px;
  cursor: pointer;
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.18);
  opacity: 0.9;
}

.simon-red { background: #ff5252; }
.simon-blue { background: #42a5f5; }
.simon-green { background: #66bb6a; }
.simon-yellow { background: #ffd54f; }
.simon-pad.active {
  transform: scale(0.97);
  box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.7), 0 12px 24px rgba(0, 0, 0, 0.2);
  opacity: 1;
}

/* Memory */
.gp-memory-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 8px;
}

.gp-memory-card {
  aspect-ratio: 1 / 1;
  border-radius: 12px;
  border: 2px solid var(--primary-light);
  background: linear-gradient(140deg, rgba(255, 255, 255, 0.84), rgba(246, 241, 255, 0.9));
  font-size: 1.6rem;
  cursor: pointer;
  color: var(--text);
}

.gp-memory-card.done {
  border-color: #4caf50;
  background: #e8f5e9;
}

/* Router */
.router-board {
  display: grid;
  gap: 5px;
  padding: 8px;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid var(--unicorn-border);
}

.router-cell {
  aspect-ratio: 1 / 1;
  border-radius: 8px;
  background: #f3f5fa;
}

.router-cell.wall { background: #6d6d80; }
.router-cell.start { background: #b3e5fc; }
.router-cell.goal { background: #ffe082; }
.router-cell.player {
  background: #ff80ab;
  box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.85);
}

.router-controls {
  display: grid;
  justify-items: center;
  gap: 8px;
}

.router-controls-row {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

/* Antura */
.antura-slots {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(44px, 1fr));
  gap: 6px;
}

.antura-slot {
  min-height: 44px;
  border-radius: 10px;
  border: 2px dashed var(--primary-light);
  background: rgba(255, 255, 255, 0.82);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1.1rem;
}

.antura-bank {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(48px, 1fr));
  gap: 8px;
}

.antura-letter {
  border-radius: 12px;
  border: 2px solid var(--primary-light);
  background: white;
  min-height: 46px;
  font-weight: 800;
  cursor: pointer;
  font-size: 1rem;
}

.antura-letter.used {
  opacity: 0.45;
}

.antura-actions {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

@media (max-width: 480px) {
  .home-container,
  .category-detail-container,
  .learn-container,
  .game-select-container,
  .quiz-container,
  .sound-container,
  .matching-container,
  .counting-container,
  .combine-container,
  .coloring-select-container,
  .coloring-container,
  .reward-container,
  .attendance-container {
    padding: 14px;
  }
  .learn-header {
    gap: 8px;
  }
  .learn-title {
    font-size: 1.08rem;
    text-align: center;
  }
  .game-mode-card {
    padding: 14px 12px;
    gap: 10px;
  }
  .tool-btn,
  .coloring-mini-btn {
    min-height: var(--touch-target);
  }
  .coloring-design-controls .coloring-mini-btn {
    flex: 1 1 46%;
    text-align: center;
  }
  .coloring-palette {
    gap: 6px;
    max-width: 320px;
  }
  .palette-color {
    width: clamp(32px, 9.5vw, 40px);
    height: clamp(32px, 9.5vw, 40px);
  }
  .tool-chip-row {
    gap: 6px;
  }
  .spellie-row { grid-template-columns: repeat(5, 40px); }
  .spellie-tile { width: 40px; height: 40px; }
  .simon-pad { min-height: 78px; }
}

/* Extra classic arcade pack games */
.arcade-canvas {
  width: 100%;
  max-width: 420px;
  margin: 0 auto;
  display: block;
  border-radius: 14px;
  border: 2px solid var(--primary-light);
  background: #ffffff;
}

.arcade-controls {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.rps-row {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.ttt-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.ttt-cell {
  min-height: 74px;
  border-radius: 12px;
  border: 2px solid var(--primary-light);
  background: rgba(255, 255, 255, 0.82);
  font-size: 1.8rem;
  font-weight: 800;
  color: var(--text);
}

.whack-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.whack-cell {
  min-height: 76px;
  border-radius: 14px;
  border: 2px solid var(--primary-light);
  background: linear-gradient(140deg, #f1fff2, #f4f8ff);
}

.mole {
  font-size: 2rem;
  opacity: 0.2;
  transform: translateY(10px) scale(0.85);
  transition: all 0.16s ease;
}

.mole.show {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.grid2048 {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 7px;
  padding: 8px;
  border-radius: 12px;
  border: 1px solid var(--unicorn-border);
  background: rgba(255, 255, 255, 0.72);
}

.tile2048 {
  min-height: 52px;
  border-radius: 10px;
  background: #eceff1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  color: #455a64;
}

.tile2048.v2 { background: #fff8e1; color: #795548; }
.tile2048.v4 { background: #ffe0b2; color: #6d4c41; }
.tile2048.v8 { background: #ffcc80; color: #4e342e; }
.tile2048.v16 { background: #ffb74d; color: #ffffff; }
.tile2048.v32 { background: #ff9800; color: #ffffff; }
.tile2048.v64 { background: #ff7043; color: #ffffff; }
.tile2048.v128 { background: #f06292; color: #ffffff; }
.tile2048.v256 { background: #ba68c8; color: #ffffff; }
.tile2048.v512 { background: #7e57c2; color: #ffffff; }
.tile2048.v1024, .tile2048.v2048 { background: #5e35b1; color: #ffffff; }

.mines-grid {
  display: grid;
  gap: 6px;
}

.mine-cell {
  min-height: 42px;
  border-radius: 10px;
  border: 2px solid var(--primary-light);
  background: #ffffff;
  font-weight: 800;
}

.mine-cell.open {
  background: #f3f4f8;
}

.install-app-card {
  width: 100%;
  border: 0;
  border-radius: 16px;
  background: linear-gradient(135deg, #fff2c7 0%, #ffe8f5 100%);
  box-shadow: 0 8px 20px rgba(255, 145, 198, 0.24);
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  cursor: pointer;
}

.install-app-icon {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: #ffffff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 21px;
  flex-shrink: 0;
}

.install-app-text {
  display: flex;
  flex-direction: column;
  text-align: left;
  color: #503968;
  gap: 2px;
  flex: 1;
}

.install-app-text strong {
  font-size: 15px;
  line-height: 1.2;
}

.install-app-text small {
  font-size: 12px;
  line-height: 1.3;
  opacity: 0.85;
}

.install-app-cta {
  min-width: 58px;
  height: 32px;
  padding: 0 12px;
  border-radius: 999px;
  background: #ffffff;
  color: #5e447f;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 700;
}

.parent-insight-card {
  margin-top: 14px;
  padding: 14px;
  border-radius: 12px;
  background: linear-gradient(160deg, #f7f4ff 0%, #fff8f2 100%);
  border: 1px solid #ece4ff;
}

.parent-insight-card h4 {
  margin: 0 0 10px;
  font-size: 14px;
  color: #5a4282;
}

.parent-insight-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 8px;
}

.parent-insight-list li {
  position: relative;
  padding-left: 18px;
  font-size: 13px;
  color: #4f3c76;
  line-height: 1.4;
}

.parent-insight-list li::before {
  content: "â€¢";
  position: absolute;
  left: 4px;
  top: 0;
  color: #8b6dc7;
  font-weight: 700;
}

.play-hub-hero {
  margin: 0 0 12px;
  padding: 14px;
  border-radius: 16px;
  background: linear-gradient(140deg, #ffe9f7 0%, #e9efff 60%, #e9fff1 100%);
  border: 1px solid #eadfff;
}

.play-hub-subtitle {
  margin-top: 4px;
  color: #594281;
  font-size: 13px;
  font-weight: 700;
}

.play-hub-tags {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.play-hub-tag {
  display: inline-flex;
  align-items: center;
  height: 24px;
  padding: 0 9px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.88);
  border: 1px solid rgba(145, 110, 212, 0.3);
  color: #563b7f;
  font-size: 11px;
  font-weight: 800;
}

.tower-game-container {
  min-height: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding-bottom: 12px;
}

.tower-hud {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  padding: 0 12px;
  color: #5a4478;
  font-size: 13px;
  font-weight: 700;
}

.tower-combo-chip {
  margin: -2px 12px 0;
  width: fit-content;
  padding: 4px 10px;
  border-radius: 999px;
  background: #f0ebff;
  color: #6e53aa;
  font-size: 12px;
  font-weight: 800;
  opacity: 0.55;
  transform: scale(0.98);
  transition: all 0.2s ease;
}

.tower-combo-chip.active {
  opacity: 1;
  background: linear-gradient(135deg, #ffe59f 0%, #ffc8ec 100%);
  color: #5a2f86;
  box-shadow: 0 6px 12px rgba(176, 99, 219, 0.18);
  transform: scale(1);
}

.tower-scene {
  margin: 0 12px;
  height: 260px;
  border-radius: 16px;
  position: relative;
  overflow: hidden;
  border: 1px solid #e9e0ff;
  background: linear-gradient(180deg, #d9e9ff 0%, #f2f7ff 64%, #ece8ff 100%);
}

.tower-scene.pop {
  animation: tower-pop 0.28s ease;
}

.tower-scene.shake {
  animation: tower-shake 0.34s ease;
}

.tower-sky {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 20% 22%, rgba(255, 255, 255, 0.95) 0 16px, transparent 20px),
    radial-gradient(circle at 74% 15%, rgba(255, 255, 255, 0.9) 0 14px, transparent 18px);
}

.tower-floor {
  position: absolute;
  left: -10%;
  right: -10%;
  bottom: -34px;
  height: 130px;
  background: linear-gradient(180deg, #b4c8ff 0%, #93adff 100%);
  transform: perspective(260px) rotateX(65deg);
  transform-origin: top center;
}

.tower-stack {
  position: absolute;
  left: 50%;
  bottom: 38px;
  width: 76px;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column-reverse;
  align-items: center;
  gap: 2px;
}

.tower-block {
  width: 76px;
  height: 19px;
  position: relative;
  border-radius: 4px 4px 2px 2px;
  background: linear-gradient(120deg, #e7edff 0%, #ced9ff 100%);
  border: 1px solid #becbff;
  opacity: 0.35;
}

.tower-block::before {
  content: "";
  position: absolute;
  left: -8px;
  top: 0;
  width: 8px;
  height: 100%;
  background: #b2c2ff;
  transform: skewY(-42deg);
  transform-origin: right top;
}

.tower-block::after {
  content: "";
  position: absolute;
  left: 0;
  top: -8px;
  width: 100%;
  height: 8px;
  background: #f4f7ff;
  transform: skewX(-48deg);
  transform-origin: left bottom;
}

.tower-block.built {
  opacity: 1;
  border-color: #8da5ff;
  background: linear-gradient(120deg, #fef7c8 0%, #ffd9f2 100%);
  box-shadow: 0 4px 10px rgba(143, 108, 227, 0.22);
}

.tower-block.newest {
  animation: tower-rise 0.45s ease;
}

.tower-block.built::before {
  background: #ceb6ff;
}

.tower-block.built::after {
  background: #fff7d7;
}

.tower-block > span {
  position: absolute;
  right: 7px;
  top: 1px;
  font-size: 11px;
}

.tower-question-card {
  margin: 0 12px;
  border-radius: 14px;
  background: #ffffff;
  border: 1px solid #efe6ff;
  padding: 12px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.tower-question-emoji {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #f6f0ff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 19px;
  flex-shrink: 0;
}

.tower-question-text {
  color: #4f3b72;
  font-size: 18px;
  font-weight: 800;
  line-height: 1.2;
}

.tower-choices {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  padding: 0 12px;
}

.tower-choice {
  border: 0;
  border-radius: 12px;
  background: linear-gradient(180deg, #f9f6ff 0%, #ece4ff 100%);
  min-height: 56px;
  position: relative;
  color: #4e3972;
  font-weight: 900;
  font-size: 24px;
  box-shadow: 0 6px 0 #d4c6f8, 0 10px 16px rgba(95, 73, 145, 0.16);
  cursor: pointer;
  transition: transform 0.14s ease, box-shadow 0.14s ease;
}

.tower-choice:hover {
  transform: translateY(-2px);
}

.tower-choice:active {
  transform: translateY(3px);
  box-shadow: 0 3px 0 #d4c6f8;
}

.tower-choice.correct {
  background: linear-gradient(180deg, #ebffe8 0%, #c9f7bf 100%);
  box-shadow: 0 6px 0 #8bd37a, 0 10px 16px rgba(65, 146, 68, 0.2);
}

.tower-choice.wrong {
  background: linear-gradient(180deg, #ffe8ee 0%, #ffc6d4 100%);
  box-shadow: 0 6px 0 #df8ea7, 0 10px 16px rgba(181, 73, 108, 0.2);
}

@keyframes tower-pop {
  0% { transform: translateY(0) scale(1); }
  45% { transform: translateY(-4px) scale(1.01); }
  100% { transform: translateY(0) scale(1); }
}

@keyframes tower-shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(5px); }
  60% { transform: translateX(-3px); }
  80% { transform: translateX(3px); }
}

@keyframes tower-rise {
  0% {
    transform: translateY(16px) scale(0.96);
    opacity: 0.2;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

@media (max-width: 380px) {
  .tower-question-text {
    font-size: 16px;
  }
  .tower-choice {
    font-size: 21px;
    min-height: 52px;
  }
}

/* ==========================================
   3D SHAPE IQ GAMES
   ========================================== */
.shape3d-container {
  min-height: 100%;
  padding: 16px;
  background: var(--bg);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.shape3d-prompt {
  border-radius: 16px;
  border: 1px solid #e9dfff;
  background: linear-gradient(145deg, #ffffff 0%, #f7f1ff 62%, #edf7ff 100%);
  padding: 14px;
  display: grid;
  gap: 10px;
}

.shape3d-visual {
  min-height: 64px;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.9);
  border: 1px dashed rgba(130, 98, 196, 0.28);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  white-space: pre-line;
  text-align: center;
  line-height: 1.25;
}

.shape3d-text {
  color: #4f3b72;
  font-size: 0.95rem;
  font-weight: 700;
  text-align: center;
  line-height: 1.45;
}

.shape3d-choices {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.shape3d-choice {
  border: 2px solid rgba(151, 123, 219, 0.28);
  border-radius: 14px;
  min-height: 92px;
  background: linear-gradient(180deg, #ffffff 0%, #f6f0ff 100%);
  color: #4f3b72;
  font-family: inherit;
  font-weight: 800;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
  display: grid;
  align-content: center;
  justify-items: center;
  gap: 4px;
  box-shadow: 0 8px 14px rgba(108, 83, 173, 0.12);
}

.shape3d-choice:hover {
  transform: translateY(-2px);
  border-color: rgba(113, 86, 186, 0.45);
}

.shape3d-choice:active {
  transform: translateY(1px) scale(0.98);
}

.shape3d-choice.correct {
  border-color: #61c778;
  background: linear-gradient(180deg, #f1fff2 0%, #d8f7df 100%);
}

.shape3d-choice.wrong {
  border-color: #e58da3;
  background: linear-gradient(180deg, #fff2f5 0%, #ffdbe4 100%);
}

.shape3d-choice:disabled {
  cursor: default;
  opacity: 0.92;
}

.shape3d-choice-emoji {
  font-size: 1.8rem;
  line-height: 1;
}

.shape3d-choice-name {
  font-size: 0.9rem;
}

@media (max-width: 380px) {
  .shape3d-visual {
    font-size: 1.6rem;
    min-height: 58px;
  }

  .shape3d-choice {
    min-height: 84px;
  }
}
